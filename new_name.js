// 1. –ò–º–ø–æ—Ä—Ç—ã –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
const TelegramBot = require('node-telegram-bot-api');
const sqlite3 = require('sqlite3').verbose();
const OpenAI = require('openai');
const ExcelJS = require('exceljs');
const fs = require('fs');
const schedule = require('node-schedule'); 
require('dotenv').config();

// 2. –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
const token = process.env.TELEGRAM_TOKEN;
const admins = [1301142907, 225496853, 246813579];

const openai = new OpenAI({
    apiKey: process.env.API
});

const bot = new TelegramBot(token, { polling: true });

// 3. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤ —Å —Ä–∞–∑–Ω—ã–º–∏ —Ñ–æ—Ä–º–∞—Ç–∞–º–∏ –æ—Ç–≤–µ—Ç–æ–≤
const tests = {
    test1: {
        questions: [
            '–°–¥–µ–ª–∞–≤ —á—Ç–æ-–ª–∏–±–æ, –í—ã —Å–æ–º–Ω–µ–≤–∞–µ—Ç–µ—Å—å, –≤—Å–µ –ª–∏ —Å–¥–µ–ª–∞–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ, –∏ –Ω–µ —É—Å–ø–æ–∫–∞–∏–≤–∞–µ—Ç–µ—Å—å –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –Ω–µ —É–±–µ–¥–∏—Ç–µ—Å—å –µ—â–µ —Ä–∞–∑ –≤ —ç—Ç–æ–º.',
            '–í –¥–µ—Ç—Å—Ç–≤–µ –≤—ã –±—ã–ª–∏ —Ç–∞–∫–∏–º –∂–µ —Å–º–µ–ª—ã–º, –∫–∞–∫ –¥—Ä—É–≥–∏–µ –í–∞—à–∏ —Å–≤–µ—Ä—Å—Ç–Ω–∏–∫–∏.',
            '–ß–∞—Å—Ç–æ –ª–∏ —É –í–∞—Å —Ä–µ–∑–∫–æ –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –æ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è –±–µ–∑–≥—Ä–∞–Ω–∏—á–Ω–æ–≥–æ –ª–∏–∫–æ–≤–∞–Ω–∏—è –¥–æ –æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –∫ –∂–∏–∑–Ω–∏, –∫ —Å–µ–±–µ?',
            '–Ø–≤–ª—è–µ—Ç–µ—Å—å –ª–∏ –≤—ã –æ–±—ã—á–Ω–æ —Ü–µ–Ω—Ç—Ä–æ–º –≤–Ω–∏–º–∞–Ω–∏—è –≤ –æ–±—â–µ—Å—Ç–≤–µ, –≤ –∫–æ–º–ø–∞–Ω–∏–∏?',
            '–ë—ã–≤–∞–µ—Ç –ª–∏ —Ç–∞–∫, —á—Ç–æ –≤—ã –±–µ—Å–ø—Ä–∏—á–∏–Ω–Ω–æ –Ω–∞—Ö–æ–¥–∏—Ç–µ—Å—å –≤ —Ç–∞–∫–æ–º –≤–æ—Ä—á–ª–∏–≤–æ–º –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–∏, —á—Ç–æ —Å –í–∞–º–∏ –ª—É—á—à–µ –Ω–µ —Ä–∞–∑–≥–æ–≤–∞—Ä–∏–≤–∞—Ç—å?',
            '–í—ã —Å–µ—Ä—å–µ–∑–Ω—ã–π —á–µ–ª–æ–≤–µ–∫.',
            '–°–ø–æ—Å–æ–±–Ω—ã –ª–∏ –≤—ã –≤–æ—Å—Ö–∏—â–∞—Ç—å—Å—è, –≤–æ—Å—Ç–æ—Ä–≥–∞—Ç—å—Å—è —á–µ–º-–Ω–∏–±—É–¥—å?',
            '–ü—Ä–µ–¥–ø—Ä–∏–∏–º—á–∏–≤—ã –ª–∏ –í—ã?',
            '–í—ã –±—ã—Å—Ç—Ä–æ –∑–∞–±—ã–≤–∞–µ—Ç–µ, –µ—Å–ª–∏ –í–∞—Å –∫—Ç–æ-—Ç–æ –æ–±–∏–¥–∏—Ç.',
            '–ú—è–≥–∫–æ—Å–µ—Ä–¥–µ—á–Ω—ã –ª–∏ –í—ã?',
            '–û–ø—É—Å–∫–∞—è –ø–∏—Å—å–º–æ –≤ —è—â–∏–∫, –ø—Ä–æ–≤–µ—Ä—è–µ—Ç–µ –ª–∏ –í—ã, –ø—Ä–æ–≤–æ–¥—è —Ä—É–∫–æ–π –ø–æ —â–µ–ª–∏ —è—â–∏–∫–∞, —á—Ç–æ –ø–∏—Å—å–º–æ —É–ø–∞–ª–æ –≤ –Ω–µ–≥–æ?',
            '–°—Ç—Ä–µ–º–∏—Ç–µ—Å—å –ª–∏ –≤—ã –≤—Å–µ–≥–¥–∞ —Å—á–∏—Ç–∞—Ç—å—Å—è –≤ —á–∏—Å–ª–µ –ª—É—á—à–∏—Ö —Ä–∞–±–æ—Ç–Ω–∏–∫–æ–≤?',
            '–ë—ã–≤–∞–ª–æ –ª–∏ –í–∞–º –≤ –¥–µ—Ç—Å—Ç–≤–µ —Å—Ç—Ä–∞—à–Ω–æ –≤–æ –≤—Ä–µ–º—è –≥—Ä–æ–∑—ã –∏–ª–∏ –ø—Ä–∏ –≤—Å—Ç—Ä–µ—á–µ —Å –Ω–µ–∑–Ω–∞–∫–æ–º–æ–π —Å–æ–±–∞–∫–æ–π (–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å, —Ç–∞–∫–æ–µ —á—É–≤—Å—Ç–≤–æ –±—ã–≤–∞–µ—Ç –∏ —Ç–µ–ø–µ—Ä—å)?',
            '–í—ã —Å—Ç—Ä–µ–º–∏—Ç–µ—Å—å –≤–æ –≤—Å–µ–º –∏ –ø–æ–≤—Å—é–¥—É —Å–æ–±–ª—é–¥–∞—Ç—å –ø–æ—Ä—è–¥–æ–∫.',
            '–í–∞—à–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö –æ–±—Å—Ç–æ—è—Ç–µ–ª—å—Å—Ç–≤.',
            '–õ—é–±—è—Ç –ª–∏ –≤–∞—Å –≤–∞—à–∏ –∑–Ω–∞–∫–æ–º—ã–µ?',
            '–ß–∞—Å—Ç–æ –ª–∏ —É –í–∞—Å –±—ã–≤–∞–µ—Ç —á—É–≤—Å—Ç–≤–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –±–µ—Å–ø–æ–∫–æ–π—Å—Ç–≤–∞, –æ—â—É—â–µ–Ω–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ–π –Ω–µ–ø—Ä–∏—è—Ç–Ω–æ—Å—Ç–∏, –±–µ–¥—ã?',
            '–£ –≤–∞—Å —á–∞—Å—Ç–æ –±—ã–≤–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–¥–∞–≤–ª–µ–Ω–Ω–æ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ.',
            '–ü–µ—Ä–µ–∂–∏–≤–∞–ª–∏ –ª–∏ –í—ã —Ö–æ—Ç—è –±—ã —Ä–∞–∑ –∏—Å—Ç–µ—Ä–∏–∫—É –∏–ª–∏ –Ω–µ—Ä–≤–Ω—ã–π —Å—Ä—ã–≤?',
            '–¢—Ä—É–¥–Ω–æ –ª–∏ –≤–∞–º –¥–æ–ª–≥–æ —É—Å–∏–¥–µ—Ç—å –Ω–∞ –º–µ—Å—Ç–µ?',
            '–ï—Å–ª–∏ –ø–æ –æ—Ç–Ω–æ—à–µ–Ω–∏—é –∫ –í–∞–º –Ω–µ—Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ –ø–æ—Å—Ç—É–ø–∏–ª–∏, –í—ã –æ–±—ã—á–Ω–æ —Å—á–∏—Ç–∞–µ—Ç–µ –Ω—É–∂–Ω—ã–º —ç–Ω–µ—Ä–≥–∏—á–Ω–æ –æ—Ç—Å—Ç–∞–∏–≤–∞—Ç—å —Å–≤–æ–∏ –∏–Ω—Ç–µ—Ä–µ—Å—ã.',
            '–ú–æ–∂–µ—Ç–µ –ª–∏ –í—ã –∑–∞—Ä–µ–∑–∞—Ç—å –∫—É—Ä–∏—Ü—É –∏–ª–∏ –æ–≤—Ü—É?',
            '–í–∞—Å —Ä–∞–∑–¥—Ä–∞–∂–∞–µ—Ç, –µ—Å–ª–∏ –¥–æ–º–∞ –∑–∞–Ω–∞–≤–µ—Å –∏–ª–∏ —Å–∫–∞—Ç–µ—Ä—Ç—å –≤–∏—Å—è—Ç –Ω–µ—Ä–æ–≤–Ω–æ, –∏ –≤—ã —Å—Ä–∞–∑—É –∂–µ —Å—Ç–∞—Ä–∞–µ—Ç–µ—Å—å –ø–æ–ø—Ä–∞–≤–∏—Ç—å –∏—Ö.',
            '–í—ã –≤ –¥–µ—Ç—Å—Ç–≤–µ –±–æ—è–ª–∏—Å—å –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è –≤ –æ–¥–∏–Ω–æ—á–µ—Å—Ç–≤–µ –¥–æ–º–∞.',
            '–ß–∞—Å—Ç–æ –ª–∏ —É –≤–∞—Å –±—ã–≤–∞—é—Ç –±–µ—Å–ø—Ä–∏—á–∏–Ω–Ω—ã–µ –∫–æ–ª–µ–±–∞–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è ?',
            '–í—ã —Å—Ç—Ä–µ–º–∏—Ç–µ—Å—å –±—ã—Ç—å –≤—ã—Å–æ–∫–æ–∫–≤–∞–ª–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–º —Ä–∞–±–æ—Ç–Ω–∏–∫–æ–º –≤ —Å–≤–æ–µ–π –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏.',
            '–ë—ã—Å—Ç—Ä–æ –ª–∏ –í—ã –Ω–∞—á–∏–Ω–∞–µ—Ç–µ —Å–µ—Ä–¥–∏—Ç—å—Å—è –∏–ª–∏ –≤–ø–∞–¥–∞—Ç—å –≤ –≥–Ω–µ–≤?',
            '–ú–æ–∂–µ—Ç–µ –ª–∏ –í—ã –±—ã—Ç—å –∞–±—Å–æ–ª—é—Ç–Ω–æ –±–µ–∑–∑–∞–±–æ—Ç–Ω—ã–º?',
            '–ë—ã–≤–∞–µ—Ç –ª–∏ —Ç–∞–∫, —á—Ç–æ –æ—â—É—â–µ–Ω–∏–µ –ø–æ–ª–Ω–æ–≥–æ —Å—á–∞—Å—Ç—å—è –±—É–∫–≤–∞–ª—å–Ω–æ –ø—Ä–æ–Ω–∏–∑—ã–≤–∞–µ—Ç –í–∞—Å?',
            '–ö–∞–∫ –í—ã –¥—É–º–∞–µ—Ç–µ, –ø–æ–ª—É—á–∏–ª—Å—è –±—ã –∏–∑ –í–∞—Å –≤–µ–¥—É—â–∏–π –≤ —é–º–æ—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–º –∫–æ–Ω—Ü–µ—Ä—Ç–µ?',
            '–í—ã –æ–±—ã—á–Ω–æ –≤—ã—Å–∫–∞–∑—ã–≤–∞–µ—Ç–µ —Å–≤–æ–µ –º–Ω–µ–Ω–∏–µ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –æ—Ç–∫—Ä–æ–≤–µ–Ω–Ω–æ, –ø—Ä—è–º–æ –∏ –Ω–µ–¥–≤—É—Å–º—ã—Å–ª–µ–Ω–Ω–æ.',
            '–í–∞–º —Ç—Ä—É–¥–Ω–æ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—å –≤–∏–¥ –∫—Ä–æ–≤–∏, –æ–Ω –≤—ã–∑—ã–≤–∞–µ—Ç —É –í–∞—Å –Ω–µ–ø—Ä–∏—è—Ç–Ω—ã–µ –æ—â—É—â–µ–Ω–∏—è.',
            '–ù—Ä–∞–≤–∏—Ç—Å—è –ª–∏ –í–∞–º —Ä–∞–±–æ—Ç–∞ —Å –±–æ–ª—å—à–æ–π –ª–∏—á–Ω–æ–π –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å—é?',
            '–í—ã —Å–∫–ª–æ–Ω–Ω—ã –≤—ã—Å—Ç—É–ø–∞—Ç—å –≤ –∑–∞—â–∏—Ç—É –ª–∏—Ü, –ø–æ –æ—Ç–Ω–æ—à–µ–Ω–∏—é –∫ –∫–æ—Ç–æ—Ä—ã–º –¥–æ–ø—É—â–µ–Ω–∞ –Ω–µ—Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç—å.',
            '–ë—ã–ª–æ –±—ã –í–∞–º —Å—Ç—Ä–∞—à–Ω–æ —Å–ø—É—Å–∫–∞—Ç—å—Å—è –≤ —Ç–µ–º–Ω—ã–π –ø–æ–¥–≤–∞–ª?',
            '–í—ã –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ—Ç–µ —Ä–∞–±–æ—Ç—É, –≤ –∫–æ—Ç–æ—Ä–æ–π –Ω–∞–¥–æ –¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å –±—ã—Å—Ç—Ä–æ, –Ω–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –∫–∞—á–µ—Å—Ç–≤—É –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –Ω–µ–≤—ã—Å–æ–∫–∏.',
            '–û–±—â–∏—Ç–µ–ª—å–Ω—ã –ª–∏ –í—ã?',
            '–í —à–∫–æ–ª–µ –≤—ã –æ—Ö–æ—Ç–Ω–æ –¥–µ–∫–ª–∞–º–∏—Ä–æ–≤–∞–ª–∏ —Å—Ç–∏—Ö–∏.',
            '–£–±–µ–≥–∞–ª–∏ –ª–∏ –í—ã –≤ –¥–µ—Ç—Å—Ç–≤–µ –∏–∑ –¥–æ–º–∞?',
            '–ö–∞–∂–µ—Ç—Å—è –ª–∏ –í–∞–º –∂–∏–∑–Ω—å —Ç—Ä—É–¥–Ω–æ–π?',
            '–ë—ã–≤–∞–µ—Ç –ª–∏ —Ç–∞–∫, —á—Ç–æ –ø–æ—Å–ª–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞, –æ–±–∏–¥—ã –í—ã –±—ã–ª–∏ –¥–æ —Ç–æ–≥–æ —Ä–∞—Å—Å—Ç—Ä–æ–µ–Ω—ã, —á—Ç–æ –∏–¥—Ç–∏ –Ω–∞ —Ä–∞–±–æ—Ç—É –∫–∞–∑–∞–ª–æ—Å—å –ø—Ä–æ—Å—Ç–æ –Ω–µ–≤—ã–Ω–æ—Å–∏–º—ã–º?',
            '–ú–æ–∂–Ω–æ –ª–∏ —Å–∫–∞–∑–∞—Ç—å, —á—Ç–æ –ø—Ä–∏ –Ω–µ—É–¥–∞—á–µ –í—ã –Ω–µ —Ç–µ—Ä—è–µ—Ç–µ —á—É–≤—Å—Ç–≤–∞ —é–º–æ—Ä–∞?',
            '–ï—Å–ª–∏ –±—ã –í–∞—Å –∫—Ç–æ-–ª–∏–±–æ –æ–±–∏–¥–µ–ª, –ø—Ä–µ–¥–ø—Ä–∏–Ω—è–ª–∏ –±—ã –í—ã –ø–µ—Ä–≤—ã–º —à–∞–≥–∏ –∫ –ø—Ä–∏–º–∏—Ä–µ–Ω–∏—é?',
            '–í—ã –æ—á–µ–Ω—å –ª—é–±–∏—Ç–µ –∂–∏–≤–æ—Ç–Ω—ã—Ö.',
            '–í—ã –∏–Ω–æ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç–µ—Å—å, —á—Ç–æ–±—ã —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –æ—Å—Ç–∞–≤–∏–ª–∏ –¥–æ–º –∏–ª–∏ —Ä–∞–±–æ—á–µ–µ –º–µ—Å—Ç–æ –≤ –ø–æ—Ä—è–¥–∫–µ, –∏ —Ç–∞–º –Ω–∏—á–µ–≥–æ –Ω–µ–ø—Ä–µ–¥–≤–∏–¥–µ–Ω–Ω–æ–≥–æ –Ω–µ —Å–ª—É—á–∏–ª–æ—Å—å.',
            '–í–∞—Å –∏–Ω–æ–≥–¥–∞ –ø—Ä–µ—Å–ª–µ–¥—É–µ—Ç –Ω–µ—è—Å–Ω–∞—è –º—ã—Å–ª—å, —á—Ç–æ —Å –í–∞–º–∏ –∏–ª–∏ –í–∞—à–∏–º–∏ –±–ª–∏–∑–∫–∏–º–∏ –º–æ–∂–µ—Ç —Å–ª—É—á–∏—Ç—å—Å—è —á—Ç–æ-—Ç–æ —Å—Ç—Ä–∞—à–Ω–æ–µ.',
            '–°—á–∏—Ç–∞–µ—Ç–µ –ª–∏ –í—ã, —á—Ç–æ –í–∞—à–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –æ—á–µ–Ω—å –∏–∑–º–µ–Ω—á–∏–≤–æ?',
            '–¢—Ä—É–¥–Ω–æ –ª–∏ –í–∞–º –≤—ã—Å—Ç—É–ø–∞—Ç—å –ø–µ—Ä–µ–¥ –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –ª—é–¥–µ–π?',
            '–í—ã –º–æ–∂–µ—Ç–µ —É–¥–∞—Ä–∏—Ç—å –æ–±–∏–¥—á–∏–∫–∞, –µ—Å–ª–∏ –æ–Ω –í–∞—Å –æ—Å–∫–æ—Ä–±–∏—Ç.',
            '–£ –í–∞—Å –æ—á–µ–Ω—å –≤–µ–ª–∏–∫–∞ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—å –≤ –æ–±—â–µ–Ω–∏–∏ —Å –¥—Ä—É–≥–∏–º–∏ –ª—é–¥—å–º–∏.',
            '–í—ã –æ—Ç–Ω–æ—Å–∏—Ç–µ—Å—å –∫ —Ç–µ–º, –∫—Ç–æ –ø—Ä–∏ –∫–∞–∫–∏—Ö-–ª–∏–±–æ —Ä–∞–∑–æ—á–∞—Ä–æ–≤–∞–Ω–∏—è—Ö –≤–ø–∞–¥–∞–µ—Ç –≤ –≥–ª—É–±–æ–∫–æ–µ –æ—Ç—á–∞—è–Ω–∏–µ.',
            '–í–∞–º –Ω—Ä–∞–≤–∏—Ç—Å—è —Ä–∞–±–æ—Ç–∞, —Ç—Ä–µ–±—É—é—â–∞—è —ç–Ω–µ—Ä–≥–∏—á–Ω–æ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä—Å–∫–æ–π –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.',
            '–£ –í–∞—Å —Ö–≤–∞—Ç–∞–µ—Ç –Ω–∞—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏ –¥–æ–±–∏–≤–∞—Ç—å—Å—è –ø–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–π —Ü–µ–ª–∏, –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —Ç–æ, —á—Ç–æ –Ω–∞ –ø—É—Ç–∏ –∫ –Ω–µ–π –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è –ø—Ä–µ–æ–¥–æ–ª–µ–≤–∞—Ç—å –º–Ω–æ–≥–æ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π.',
            '–¢—Ä–∞–≥–∏—á–µ—Å–∫–∏–π —Ñ–∏–ª—å–º –º–æ–∂–µ—Ç –≤–∑–≤–æ–ª–Ω–æ–≤–∞—Ç—å –í–∞—Å —Ç–∞–∫, —á—Ç–æ –Ω–∞ –≥–ª–∞–∑–∞—Ö –≤—ã—Å—Ç—É–ø–∞—é—Ç —Å–ª–µ–∑—ã.',
            '–ß–∞—Å—Ç–æ –ª–∏ –≤–∞–º –±—ã–≤–∞–µ—Ç —Ç—Ä—É–¥–Ω–æ —É—Å–Ω—É—Ç—å –∏–∑-–∑–∞ —Ç–æ–≥–æ, —á—Ç–æ –ø—Ä–æ–±–ª–µ–º—ã –ø—Ä–æ–∂–∏—Ç–æ–≥–æ –∏–ª–∏ –±—É–¥—É—â–µ–≥–æ –¥–Ω—è –≤—Å–µ –≤—Ä–µ–º—è –∫—Ä—É—Ç—è—Ç—Å—è –≤ –≥–æ–ª–æ–≤–µ?',
            '–í —à–∫–æ–ª–µ –í—ã –ø–æ–¥—Å–∫–∞–∑—ã–≤–∞–ª–∏ –∏–ª–∏ –¥–∞–≤–∞–ª–∏ —Å–ø–∏—Å—ã–≤–∞—Ç—å —Ç–æ–≤–∞—Ä–∏—â–∞–º.',
            '–í–∞–º –ø–æ—Ç—Ä–µ–±–æ–≤–∞–ª–æ—Å—å –±—ã –±–æ–ª—å—à–æ–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –≤–æ–ª–∏, —á—Ç–æ–±—ã –ø—Ä–æ–π—Ç–∏ –Ω–æ—á—å—é –æ–¥–Ω–æ–º—É —á–µ—Ä–µ–∑ –∫–ª–∞–¥–±–∏—â–µ.',
            '–¢—â–∞—Ç–µ–ª—å–Ω–æ –ª–∏ –í—ã —Å–ª–µ–¥–∏—Ç–µ –∑–∞ —Ç–µ–º, —á—Ç–æ–±—ã –¥–æ–º–∞ –∫–∞–∂–¥–∞—è –≤–µ—â—å –±—ã–ª–∞ –≤—Å–µ–≥–¥–∞ –Ω–∞ —Å–≤–æ–µ–º –º–µ—Å—Ç–µ?',
            '–ë—ã–≤–∞–µ—Ç –ª–∏ —Ç–∞–∫, —á—Ç–æ –í—ã –ª–æ–∂–∏—Ç–µ—Å—å –≤–µ—á–µ—Ä–æ–º —Å–ø–∞—Ç—å –≤ —Ö–æ—Ä–æ—à–µ–º –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–∏, –∞ –Ω–∞—É—Ç—Ä–æ –≤—Å—Ç–∞–µ—Ç–µ –≤ –ø–æ–¥–∞–≤–ª–µ–Ω–Ω–æ–º, –∫–æ—Ç–æ—Ä–æ–µ –¥–ª–∏—Ç—Å—è —á—É—Ç—å –ª–∏ –Ω–µ –≤–µ—Å—å –¥–µ–Ω—å?',
            '–õ–µ–≥–∫–æ –ª–∏ –í—ã –ø—Ä–∏–≤—ã–∫–∞–µ—Ç–µ –∫ –Ω–æ–≤—ã–º —Å–∏—Ç—É–∞—Ü–∏—è–º?',
            '–ë—ã–≤–∞—é—Ç –ª–∏ —É –í–∞—Å –≥–æ–ª–æ–≤–Ω—ã–µ –±–æ–ª–∏?',
            '–í—ã —á–∞—Å—Ç–æ —Å–º–µ–µ—Ç–µ—Å—å.',
            '–í—ã –º–æ–∂–µ—Ç–µ –±—ã—Ç—å –ø—Ä–∏–≤–µ—Ç–ª–∏–≤—ã–º –¥–∞–∂–µ —Å —Ç–µ–º–∏, –∫–æ–≥–æ –í—ã —è–≤–Ω–æ –Ω–µ —Ü–µ–Ω–∏—Ç–µ –∏ –Ω–µ —É–≤–∞–∂–∞–µ—Ç–µ.',
            '–í—ã –ø–æ–¥–≤–∏–∂–Ω—ã–π —á–µ–ª–æ–≤–µ–∫.',
            '–í—ã –æ—á–µ–Ω—å –ø–µ—Ä–µ–∂–∏–≤–∞–µ—Ç–µ –∏–∑-–∑–∞ –Ω–µ—Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç–∏.',
            '–í—ã –Ω–∞—Å—Ç–æ–ª—å–∫–æ –ª—é–±–∏—Ç–µ –ø—Ä–∏—Ä–æ–¥—É, —á—Ç–æ –º–æ–∂–µ—Ç–µ –Ω–∞–∑–≤–∞—Ç—å –µ–µ —Å–≤–æ–∏–º –¥—Ä—É–≥–æ–º.',
            '–£—Ö–æ–¥—è –∏–∑ –¥–æ–º–∞ –∏–ª–∏ –ª–æ–∂–∞—Å—å —Å–ø–∞—Ç—å, –ø—Ä–æ–≤–µ—Ä—è–µ—Ç–µ –ª–∏ –í—ã, –∑–∞–∫—Ä—ã—Ç –ª–∏ –≥–∞–∑, –ø–æ–≥–∞—à–µ–Ω –ª–∏ —Å–≤–µ—Ç, –∑–∞–ø–µ—Ä—Ç—ã –ª–∏ –¥–≤–µ—Ä–∏?',
            '–í—ã –æ—á–µ–Ω—å –±–æ—è–∑–ª–∏–≤—ã.',
            '–ò–∑–º–µ–Ω—è–µ—Ç—Å—è –ª–∏ –í–∞—à–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –ø—Ä–∏ –ø—Ä–∏–µ–º–µ –∞–ª–∫–æ–≥–æ–ª—è?',
            '–í —é–Ω–æ—Å—Ç–∏ –í—ã –æ—Ö–æ—Ç–Ω–æ —É—á–∞—Å—Ç–≤–æ–≤–∞–ª–∏ –≤ —Ö—É–¥–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–π —Å–∞–º–æ–¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.',
            '–í—ã —Ä–∞—Å—Ü–µ–Ω–∏–≤–∞–µ—Ç–µ –∂–∏–∑–Ω—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–µ—Å—Å–∏–º–∏—Å—Ç–∏—á–µ—Å–∫–∏, –±–µ–∑ –æ–∂–∏–¥–∞–Ω–∏—è —Ä–∞–¥–æ—Å—Ç–∏.',
            '–ß–∞—Å—Ç–æ –ª–∏ –í–∞—Å —Ç—è–Ω–µ—Ç –ø—É—Ç–µ—à–µ—Å—Ç–≤–æ–≤–∞—Ç—å?',
            '–í–∞—à–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω—è—Ç—å—Å—è —Ç–∞–∫ —Ä–µ–∑–∫–æ, —á—Ç–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ä–∞–¥–æ—Å—Ç–∏ –≤–¥—Ä—É–≥ —Å–º–µ–Ω—è–µ—Ç—Å—è —É–≥—Ä—é–º–æ—Å—Ç—å—é –∏ –ø–æ–¥–∞–≤–ª–µ–Ω–Ω–æ—Å—Ç—å—é.',
            '–õ–µ–≥–∫–æ –ª–∏ –í–∞—Å —É–¥–∞–µ—Ç—Å—è –ø–æ–¥–Ω—è—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –¥—Ä—É–∑–µ–π –≤ –∫–æ–º–ø–∞–Ω–∏–∏?',
            '–î–æ–ª–≥–æ –ª–∏ –í—ã –ø–µ—Ä–µ–∂–∏–≤–∞–µ—Ç–µ –æ–±–∏–¥—É?',
            '–î–æ–ª–≥–æ –ª–∏ –í—ã –ø–µ—Ä–µ–∂–∏–≤–∞–µ—Ç–µ –≥–æ—Ä–µ—Å—Ç–∏ –¥—Ä—É–≥–∏—Ö –ª—é–¥–µ–π?',
            '–ë—É–¥—É—á–∏ —à–∫–æ–ª—å–Ω–∏–∫–æ–º, –í—ã –Ω–µ—Ä–µ–¥–∫–æ –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–ª–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—É, –µ—Å–ª–∏ —Å–ª—É—á–∞–π–Ω–æ —Å—Ç–∞–≤–∏–ª–∏ –Ω–∞ –Ω–µ–π –∫–ª—è–∫—Å—É.',
            '–í—ã –æ—Ç–Ω–æ—Å–∏—Ç–µ—Å—å –∫ –ª—é–¥—è–º —Å–∫–æ—Ä–µ–µ —Å –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç—å—é –∏ –Ω–µ–¥–æ–≤–µ—Ä–∏–µ–º, —á–µ–º –¥–æ–≤–µ—Ä—á–∏–≤–æ—Å—Ç—å—é.',
            '–ß–∞—Å—Ç–æ –ª–∏ –í—ã –≤–∏–¥–∏—Ç–µ —Å—Ç—Ä–∞—à–Ω—ã–µ —Å–Ω—ã?',
            '–ë—ã–≤–∞–µ—Ç –ª–∏, —á—Ç–æ –≤—ã –æ—Å—Ç–µ—Ä–µ–≥–∞–µ—Ç–µ—Å—å —Ç–æ–≥–æ, —á—Ç–æ –±—Ä–æ—Å–∏—Ç–µ—Å—å –ø–æ–¥ –∫–æ–ª–µ—Å–∞ –ø—Ä–æ—Ö–æ–¥—è—â–µ–≥–æ –ø–æ–µ–∑–¥–∞ –∏–ª–∏ –≤—ã–ø–∞–¥–µ—Ç–µ –∏–∑ –æ–∫–Ω–∞, —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–Ω–æ–≥–æ –Ω–∞ –≤—ã—Å–æ–∫–æ–º —ç—Ç–∞–∂–µ?',
            '–í –≤–µ—Å–µ–ª–æ–π –∫–æ–º–ø–∞–Ω–∏–∏ –í—ã –æ–±—ã—á–Ω–æ –≤–µ—Å–µ–ª—ã.',
            '–°–ø–æ—Å–æ–±–Ω—ã –ª–∏ –í—ã –æ—Ç–≤–ª–µ—á—å—Å—è –æ—Ç —Ç—Ä—É–¥–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º, —Ç—Ä–µ–±—É—é—â–∏—Ö –í–∞—à–µ–≥–æ —Ä–µ—à–µ–Ω–∏—è?',
            '–í—ã —Å—Ç–∞–Ω–æ–≤–∏—Ç–µ—Å—å –º–µ–Ω–µ–µ —Å–¥–µ—Ä–∂–∞–Ω–Ω—ã–º –∏ —á—É–≤—Å—Ç–≤—É–µ—Ç–µ —Å–µ–±—è —Å–≤–æ–±–æ–¥–Ω–µ–µ –ø–æ–¥ –≤–ª–∏—è–Ω–∏–µ–º –∞–ª–∫–æ–≥–æ–ª—è.',
            '–í –±–µ—Å–µ–¥–µ –≤—ã —Å–∫—É–ø—ã –Ω–∞ —Å–ª–æ–≤–∞.',
            '–ï—Å–ª–∏ –±—ã –í–∞–º –Ω–∞–¥–æ –±—ã–ª–æ –∏–≥—Ä–∞—Ç—å –Ω–∞ —Å—Ü–µ–Ω–µ, –í—ã —Å–º–æ–≥–ª–∏ –±—ã –≤–æ–π—Ç–∏ –≤ —Ä–æ–ª—å –Ω–∞—Å—Ç–æ–ª—å–∫–æ, —á—Ç–æ–±—ã –∑–∞–±—ã—Ç—å, —á—Ç–æ —ç—Ç–æ —Ç–æ–ª—å–∫–æ –∏–≥—Ä–∞.'
        ],
        title: '–¢–µ—Å—Ç ‚Ññ1',
        type: 'binary',
        options: [
            { text: '–î–∞', value: 'yes' },
            { text: '–ù–µ—Ç', value: 'no' }
        ]
    },
    test2: {
        questions: [
            '–õ—é–±–ª—é –Ω–∞–±–ª—é–¥–∞—Ç—å –∑–∞ –æ–±–ª–∞–∫–∞–º–∏ –∏ –∑–≤–µ–∑–¥–∞–º–∏.',
            '–ß–∞—Å—Ç–æ –Ω–∞–ø–µ–≤–∞—é —Å–µ–±–µ –ø–æ—Ç–∏—Ö–æ–Ω—å–∫—É.',
            '–ù–µ –ø—Ä–∏–∑–Ω–∞—é –º–æ–¥—É, –∫–æ—Ç–æ—Ä–∞—è –Ω–µ—É–¥–æ–±–Ω–∞.',
            '–õ—é–±–ª—é —Ö–æ–¥–∏—Ç—å –≤ —Å–∞—É–Ω—É.',
            '–í –∞–≤—Ç–æ–º–∞—à–∏–Ω–µ —Ü–≤–µ—Ç –¥–ª—è –º–µ–Ω—è –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ.',
            '–£–∑–Ω–∞—é –ø–æ —à–∞–≥–∞–º, –∫—Ç–æ –≤–æ—à–µ–ª –≤ –ø–æ–º–µ—â–µ–Ω–∏–µ.',
            '–ú–µ–Ω—è —Ä–∞–∑–≤–ª–µ–∫–∞–µ—Ç –ø–æ–¥—Ä–∞–∂–∞–Ω–∏–µ –¥–∏–∞–ª–µ–∫—Ç–∞–º.',
            '–í–Ω–µ—à–Ω–µ–º—É –≤–∏–¥—É –ø—Ä–∏–¥–∞—é —Å–µ—Ä—å–µ–∑–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ.',
            '–ú–Ω–µ –Ω—Ä–∞–≤–∏—Ç—Å—è –ø—Ä–∏–Ω–∏–º–∞—Ç—å –º–∞—Å—Å–∞–∂.',
            '–ö–æ–≥–¥–∞ –µ—Å—Ç—å –≤—Ä–µ–º—è, –ª—é–±–ª—é –Ω–∞–±–ª—é–¥–∞—Ç—å –∑–∞ –ª—é–¥—å–º–∏.',
            '–ü–ª–æ—Ö–æ —Å–µ–±—è —á—É–≤—Å—Ç–≤—É—é, –∫–æ–≥–¥–∞ –Ω–µ –Ω–∞—Å–ª–∞–∂–¥–∞—é—Å—å –¥–≤–∏–∂–µ–Ω–∏–µ–º.',
            '–í–∏–¥—è –æ–¥–µ–∂–¥—É –≤ –≤–∏—Ç—Ä–∏–Ω–µ, –∑–Ω–∞—é, —á—Ç–æ –º–Ω–µ –±—É–¥–µ—Ç —Ö–æ—Ä–æ—à–æ –≤ –Ω–µ–π.',
            '–ö–æ–≥–¥–∞ —É—Å–ª—ã—à—É —Å—Ç–∞—Ä—É—é –º–µ–ª–æ–¥–∏—é, –∫–æ –º–Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –ø—Ä–æ—à–ª–æ–µ.',
            '–õ—é–±–ª—é —á–∏—Ç–∞—Ç—å –≤–æ –≤—Ä–µ–º—è –µ–¥—ã.',
            '–õ—é–±–ª—é –ø–æ–≥–æ–≤–æ—Ä–∏—Ç—å –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É.',
            '–£ –º–µ–Ω—è –µ—Å—Ç—å —Å–∫–ª–æ–Ω–Ω–æ—Å—Ç—å –∫ –ø–æ–ª–Ω–æ—Ç–µ.',
            '–ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞—é —Å–ª—É—à–∞—Ç—å —Ä–∞—Å—Å–∫–∞–∑, –∫–æ—Ç–æ—Ä—ã–π –∫—Ç–æ-—Ç–æ —á–∏—Ç–∞–µ—Ç, —á–µ–º —á–∏—Ç–∞—Ç—å —Å–∞–º–æ–º—É.',
            '–ü–æ—Å–ª–µ –ø–ª–æ—Ö–æ–≥–æ –¥–Ω—è –º–æ–π –æ—Ä–≥–∞–Ω–∏–∑–º –≤ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–∏.',
            '–û—Ö–æ—Ç–Ω–æ –∏ –º–Ω–æ–≥–æ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—Ä—É—é.',
            '–î–æ–ª–≥–æ –ø–æ–º–Ω—é, —á—Ç–æ –º–Ω–µ —Å–∫–∞–∑–∞–ª–∏ –ø—Ä–∏—è—Ç–µ–ª–∏ –∏–ª–∏ –∑–Ω–∞–∫–æ–º—ã–µ.',
            '–õ–µ–≥–∫–æ –º–æ–≥—É –æ—Ç–¥–∞—Ç—å –¥–µ–Ω—å–≥–∏ –∑–∞ —Ü–≤–µ—Ç—ã, –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω–∏ —É–∫—Ä–∞—à–∞—é—Ç –∂–∏–∑–Ω—å.',
            '–í–µ—á–µ—Ä–æ–º –ª—é–±–ª—é –ø—Ä–∏–Ω—è—Ç—å –≥–æ—Ä—è—á—É—é –≤–∞–Ω–Ω—É.',
            '–°—Ç–∞—Ä–∞—é—Å—å –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å —Å–≤–æ–∏ –ª–∏—á–Ω—ã–µ –¥–µ–ª–∞.',
            '–ß–∞—Å—Ç–æ —Ä–∞–∑–≥–æ–≤–∞—Ä–∏–≤–∞—é —Å —Å–æ–±–æ–π.',
            '–ü–æ—Å–ª–µ –¥–ª–∏—Ç–µ–ª—å–Ω–æ–π –µ–∑–¥—ã –Ω–∞ –º–∞—à–∏–Ω–µ –¥–æ–ª–≥–æ –ø—Ä–∏—Ö–æ–∂—É –≤ —Å–µ–±—è.',
            '–¢–µ–º–±—Ä –≥–æ–ª–æ—Å–∞ –º–Ω–æ–≥–æ–µ –º–Ω–µ –≥–æ–≤–æ—Ä–∏—Ç –æ —á–µ–ª–æ–≤–µ–∫–µ.',
            '–ü—Ä–∏–¥–∞—é –∑–Ω–∞—á–µ–Ω–∏–µ –º–∞–Ω–µ—Ä–µ –æ–¥–µ–≤–∞—Ç—å—Å—è, —Å–≤–æ–π—Å—Ç–≤–µ–Ω–Ω–æ–π –¥—Ä—É–≥–∏–º.',
            '–õ—é–±–ª—é –ø–æ—Ç—è–≥–∏–≤–∞—Ç—å—Å—è, —Ä–∞—Å–ø—Ä–∞–≤–ª—è—Ç—å –∫–æ–Ω–µ—á–Ω–æ—Å—Ç–∏, —Ä–∞–∑–º–∏–Ω–∞—Ç—å—Å—è.',
            '–°–ª–∏—à–∫–æ–º —Ç–≤–µ—Ä–¥–∞—è –∏–ª–∏ —Å–ª–∏—à–∫–æ–º –º—è–≥–∫–∞—è –ø–æ—Å—Ç–µ–ª—å –¥–ª—è –º–µ–Ω—è –º—É–∫–∞.',
            '–ú–Ω–µ –Ω–µ–ª–µ–≥–∫–æ –Ω–∞–π—Ç–∏ —É–¥–æ–±–Ω—É—é –æ–±—É–≤—å.',
            '–õ—é–±–ª—é —Å–º–æ—Ç—Ä–µ—Ç—å —Ç–µ–ª–µ- –∏ –≤–∏–¥–µ–æ—Ñ–∏–ª—å–º—ã.',
            '–î–∞–∂–µ —Å–ø—É—Å—Ç—è –≥–æ–¥—ã –º–æ–≥—É —É–∑–Ω–∞—Ç—å –ª–∏—Ü–∞, –∫–æ—Ç–æ—Ä—ã–µ –∫–æ–≥–¥–∞-–ª–∏–±–æ –≤–∏–¥–µ–ª.',
            '–õ—é–±–ª—é —Ö–æ–¥–∏—Ç—å –ø–æ–¥ –¥–æ–∂–¥–µ–º, –∫–æ–≥–¥–∞ –∫–∞–ø–ª–∏ —Å—Ç—É—á–∞—Ç –ø–æ –∑–æ–Ω—Ç–∏–∫—É.',
            '–õ—é–±–ª—é —Å–ª—É—à–∞—Ç—å, –∫–æ–≥–¥–∞ –≥–æ–≤–æ—Ä—è—Ç.',
            '–õ—é–±–ª—é –∑–∞–Ω–∏–º–∞—Ç—å—Å—è –ø–æ–¥–≤–∏–∂–Ω—ã–º —Å–ø–æ—Ä—Ç–æ–º –∏–ª–∏ –≤—ã–ø–æ–ª–Ω—è—Ç—å –∫–∞–∫–∏–µ-–ª–∏–±–æ –¥–≤–∏–≥–∞—Ç–µ–ª—å–Ω—ã–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è, –∏–Ω–æ–≥–¥–∞ –∏ –ø–æ—Ç–∞–Ω—Ü–µ–≤–∞—Ç—å.',
            '–ö–æ–≥–¥–∞ –±–ª–∏–∑–∫–æ —Ç–∏–∫–∞–µ—Ç –±—É–¥–∏–ª—å–Ω–∏–∫, –Ω–µ –º–æ–≥—É —É—Å–Ω—É—Ç—å.',
            '–£ –º–µ–Ω—è –Ω–µ–ø–ª–æ—Ö–∞—è —Å—Ç–µ—Ä–µ–æ–∞–ø–ø–∞—Ä–∞—Ç—É—Ä–∞.',
            '–ö–æ–≥–¥–∞ —Å–ª—É—à–∞—é –º—É–∑—ã–∫—É, –æ—Ç–±–∏–≤–∞—é —Ç–∞–∫—Ç –Ω–æ–≥–æ–π.',
            '–ù–∞ –æ—Ç–¥—ã—Ö–µ –Ω–µ –ª—é–±–ª—é –æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –ø–∞–º—è—Ç–Ω–∏–∫–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã.',
            '–ù–µ –≤—ã–Ω–æ—à—É –±–µ—Å–ø–æ—Ä—è–¥–æ–∫.',
            '–ù–µ –ª—é–±–ª—é —Å–∏–Ω—Ç–µ—Ç–∏—á–µ—Å–∫–∏—Ö —Ç–∫–∞–Ω–µ–π.',
            '–°—á–∏—Ç–∞—é, —á—Ç–æ –∞—Ç–º–æ—Å—Ñ–µ—Ä–∞ –≤ –ø–æ–º–µ—â–µ–Ω–∏–∏ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –æ—Å–≤–µ—â–µ–Ω–∏—è.',
            '–ß–∞—Å—Ç–æ —Ö–æ–∂—É –Ω–∞ –∫–æ–Ω—Ü–µ—Ä—Ç—ã.',
            '–ü–æ–∂–∞—Ç–∏–µ —Ä—É–∫–∏ –º–Ω–æ–≥–æ –≥–æ–≤–æ—Ä–∏—Ç –º–Ω–µ –æ –¥–∞–Ω–Ω–æ–π –ª–∏—á–Ω–æ—Å—Ç–∏.',
            '–û—Ö–æ—Ç–Ω–æ –ø–æ—Å–µ—â–∞—é –≥–∞–ª–µ—Ä–µ–∏ –∏ –≤—ã—Å—Ç–∞–≤–∫–∏.',
            '–°–µ—Ä—å–µ–∑–Ω–∞—è –¥–∏—Å–∫—É—Å—Å–∏—è ‚Äì —ç—Ç–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ.',
            '–ß–µ—Ä–µ–∑ –ø—Ä–∏–∫–æ—Å–Ω–æ–≤–µ–Ω–∏–µ –º–æ–∂–Ω–æ —Å–∫–∞–∑–∞—Ç—å –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –±–æ–ª—å—à–µ, —á–µ–º —Å–ª–æ–≤–∞–º–∏.',
            '–í —à—É–º–µ –Ω–µ –º–æ–≥—É —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–∏—Ç—å—Å—è.'
        ],
        title: '–¢–µ—Å—Ç ‚Ññ2',
        type: 'binary',
        options: [
            { text: '–î–∞', value: 'yes' },
            { text: '–ù–µ—Ç', value: 'no' }
        ]
    },
    test3: {
        questions: [
            '–ß–∞—Å—Ç–æ –ª–∏ –≤—ã —á—É–≤—Å—Ç–≤—É–µ—Ç–µ —É—Å—Ç–∞–ª–æ—Å—Ç—å?',
            '–ë–µ—Å–ø–æ–∫–æ–∏—Ç –ª–∏ –≤–∞—Å –Ω–∞—Ä—É—à–µ–Ω–∏–µ —Å–Ω–∞?',
            '–ò—Å–ø—ã—Ç—ã–≤–∞–µ—Ç–µ –ª–∏ –≤—ã —Ç—Ä—É–¥–Ω–æ—Å—Ç–∏ —Å –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏–µ–π –≤–Ω–∏–º–∞–Ω–∏—è?'
        ],
        title: '–¢–µ—Å—Ç ‚Ññ3',
        type: 'multiple',
        questions: [
            '–Ø –∏—Å–ø—ã—Ç—ã–≤–∞—é –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ, –º–Ω–µ –Ω–µ –ø–æ —Å–µ–±–µ',
            '–Ø –∏—Å–ø—ã—Ç—ã–≤–∞—é —Å—Ç—Ä–∞—Ö, –∫–∞–∂–µ—Ç—Å—è, —á—Ç–æ —á—Ç–æ-—Ç–æ —É–∂–∞—Å–Ω–æ–µ –º–æ–∂–µ—Ç –≤–æ—Ç-–≤–æ—Ç —Å–ª—É—á–∏—Ç—å—Å—è',
            '–ë–µ—Å–ø–æ–∫–æ–π–Ω—ã–µ –º—ã—Å–ª–∏ –∫—Ä—É—Ç—è—Ç—Å—è —É –º–µ–Ω—è –≤ –≥–æ–ª–æ–≤–µ',
            '–Ø –ª–µ–≥–∫–æ –º–æ–≥—É –ø—Ä–∏—Å–µ—Å—Ç—å –∏ —Ä–∞—Å—Å–ª–∞–±–∏—Ç—å—Å—è',
            '–Ø –∏—Å–ø—ã—Ç—ã–≤–∞—é –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –∏–ª–∏ –¥—Ä–æ–∂—å',
            '–Ø –∏—Å–ø—ã—Ç—ã–≤–∞—é –Ω–µ—É—Å–∏–¥—á–∏–≤–æ—Å—Ç—å, –º–Ω–µ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –Ω—É–∂–Ω–æ –¥–≤–∏–≥–∞—Ç—å—Å—è',
            '–£ –º–µ–Ω—è –±—ã–≤–∞–µ—Ç –≤–Ω–µ–∑–∞–ø–Ω–æ–µ —á—É–≤—Å—Ç–≤–æ –ø–∞–Ω–∏–∫–∏',
            '–¢–æ, —á—Ç–æ –ø—Ä–∏–Ω–æ—Å–∏–ª–æ –º–Ω–µ –±–æ–ª—å—à–æ–µ —É–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏–µ, –∏ —Å–µ–π—á–∞—Å –≤—ã–∑—ã–≤–∞–µ—Ç —É –º–µ–Ω—è —Ç–∞–∫–æ–µ –∂–µ —á—É–≤—Å—Ç–≤–æ',
            '–Ø —Å–ø–æ—Å–æ–±–µ–Ω —Ä–∞—Å—Å–º–µ—è—Ç—å—Å—è –∏ —É–≤–∏–¥–µ—Ç—å –≤ —Ç–æ–º –∏–ª–∏ –∏–Ω–æ–º —Å–æ–±—ã—Ç–∏–∏ —Å–º–µ—à–Ω–æ–µ',
            '–Ø –∏—Å–ø—ã—Ç—ã–≤–∞—é –±–æ–¥—Ä–æ—Å—Ç—å',
            '–ú–Ω–µ –∫–∞–∂–µ—Ç—Å—è, —á—Ç–æ —è —Å—Ç–∞–ª –≤—Å–µ –¥–µ–ª–∞—Ç—å –æ—á–µ–Ω—å –º–µ–¥–ª–µ–Ω–Ω–æ',
            '–Ø –Ω–µ —Å–ª–µ–∂—É –∑–∞ —Å–≤–æ–µ–π –≤–Ω–µ—à–Ω–æ—Å—Ç—å—é',
            '–Ø —Å—á–∏—Ç–∞—é, —á—Ç–æ –º–æ–∏ –¥–µ–ª–∞ (–∑–∞–Ω—è—Ç–∏—è, —É–≤–ª–µ—á–µ–Ω–∏—è) –º–æ–≥—É—Ç –ø—Ä–∏–Ω–µ—Å—Ç–∏ –º–Ω–µ —á—É–≤—Å—Ç–≤–æ —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–µ–Ω–∏—è',
            '–Ø –º–æ–≥—É –ø–æ–ª—É—á–∏—Ç—å —É–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏–µ –æ—Ç —Ö–æ—Ä–æ—à–µ–π –∫–Ω–∏–≥–∏, —Ä–∞–¥–∏–æ- –∏–ª–∏ —Ç–µ–ª–µ–ø—Ä–æ–≥—Ä–∞–º–º—ã'
        ],
        optionsByQuestion: {
            // ["–û—Ç–≤–µ—Ç 1", "–û—Ç–≤–µ—Ç 2", "–û—Ç–≤–µ—Ç 3", "–û—Ç–≤–µ—Ç 4"]
            0: [ // –í–æ–ø—Ä–æ—Å 1
                { text: '–°–æ–≤—Å–µ–º –Ω–µ –∏—Å–ø—ã—Ç—ã–≤–∞—é', value: '0' },
                { text: '–í—Ä–µ–º—è –æ—Ç –≤—Ä–µ–º–µ–Ω–∏, –∏–Ω–æ–≥–¥–∞', value: '1' },
                { text: '–ß–∞—Å—Ç–æ', value: '2' },
                { text: '–í—Å–µ –≤—Ä–µ–º—è', value: '3' }
            ],
            1: [ // –í–æ–ø—Ä–æ—Å 2
                { text: '–°–æ–≤—Å–µ–º –Ω–µ –∏—Å–ø—ã—Ç—ã–≤–∞—é', value: '0' },
                { text: '–ò–Ω–æ–≥–¥–∞, –Ω–æ —ç—Ç–æ –º–µ–Ω—è –Ω–µ –±–µ—Å–ø–æ–∫–æ–∏—Ç', value: '1' },
                { text: '–î–∞, —ç—Ç–æ —Ç–∞–∫, –Ω–æ —Å—Ç—Ä–∞—Ö –Ω–µ –æ—á–µ–Ω—å –≤–µ–ª–∏–∫', value: '2' },
                { text: '–û–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ —ç—Ç–æ —Ç–∞–∫, –∏ —Å—Ç—Ä–∞—Ö –æ—á–µ–Ω—å –≤–µ–ª–∏–∫', value: '3' }
            ],
            2: [ // –í–æ–ø—Ä–æ—Å 3
                { text: '–¢–æ–ª—å–∫–æ –∏–Ω–æ–≥–¥–∞', value: '0' },
                { text: '–í—Ä–µ–º—è –æ—Ç –≤—Ä–µ–º–µ–Ω–∏ –∏ –Ω–µ —Ç–∞–∫ —á–∞—Å—Ç–æ', value: '1' },
                { text: '–ë–æ–ª—å—à—É—é —á–∞—Å—Ç—å –≤—Ä–µ–º–µ–Ω–∏', value: '2' },
                { text: '–ü–æ—Å—Ç–æ—è–Ω–Ω–æ', value: '3' }
            ],
            3: [ // –í–æ–ø—Ä–æ—Å 4
                { text: '–û–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ, —ç—Ç–æ —Ç–∞–∫', value: '0' },
                { text: '–ù–∞–≤–µ—Ä–Ω–æ, —ç—Ç–æ —Ç–∞–∫', value: '1' },
                { text: '–õ–∏—à—å –∏–∑—Ä–µ–¥–∫–∞, —ç—Ç–æ —Ç–∞–∫', value: '2' },
                { text: '–°–æ–≤—Å–µ–º –Ω–µ –º–æ–≥—É', value: '3' }
            ],
            4: [ // –í–æ–ø—Ä–æ—Å 5
                { text: '–°–æ–≤—Å–µ–º –Ω–µ –∏—Å–ø—ã—Ç—ã–≤–∞—é', value: '0' },
                { text: '–ò–Ω–æ–≥–¥–∞', value: '1' },
                { text: '–ß–∞—Å—Ç–æ', value: '2' },
                { text: '–û—á–µ–Ω—å —á–∞—Å—Ç–æ', value: '3' }
            ],
            5: [ // –í–æ–ø—Ä–æ—Å 6
                { text: '–°–æ–≤—Å–µ–º –Ω–µ –∏—Å–ø—ã—Ç—ã–≤–∞—é', value: '0' },
                { text: '–õ–∏—à—å –≤ –Ω–µ–∫–æ—Ç–æ—Ä–æ–π —Å—Ç–µ–ø–µ–Ω–∏', value: '1' },
                { text: '–ù–∞–≤–µ—Ä–Ω–æ, —ç—Ç–æ —Ç–∞–∫', value: '2' },
                { text: '–û–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ, —ç—Ç–æ —Ç–∞–∫', value: '3' }
            ],
            6: [ // –í–æ–ø—Ä–æ—Å 7
                { text: '–°–æ–≤—Å–µ–º –Ω–µ –±—ã–≤–∞–µ—Ç', value: '0' },
                { text: '–ù–µ —Ç–∞–∫ —É–∂ —á–∞—Å—Ç–æ', value: '1' },
                { text: '–î–æ–≤–æ–ª—å–Ω–æ —á–∞—Å—Ç–æ', value: '2' },
                { text: '–û—á–µ–Ω—å —á–∞—Å—Ç–æ', value: '3' }
            ],
            7: [ // –í–æ–ø—Ä–æ—Å 8
                { text: '–û–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ, —ç—Ç–æ —Ç–∞–∫', value: '0' },
                { text: '–ù–∞–≤–µ—Ä–Ω–æ–µ, —ç—Ç–æ —Ç–∞–∫', value: '1' },
                { text: '–õ–∏—à—å –≤ –æ—á–µ–Ω—å –º–∞–ª–æ–π —Å—Ç–µ–ø–µ–Ω–∏', value: '2' },
                { text: '–≠—Ç–æ —Å–æ–≤—Å–µ–º –Ω–µ —Ç–∞–∫', value: '3' }
            ],
            8: [ // –í–æ–ø—Ä–æ—Å 9
                { text: '–û–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ, —ç—Ç–æ —Ç–∞–∫', value: '0' },
                { text: '–ù–∞–≤–µ—Ä–Ω–æ–µ, —ç—Ç–æ —Ç–∞–∫', value: '1' },
                { text: '–õ–∏—à—å –≤ –æ—á–µ–Ω—å –º–∞–ª–æ–π —Å—Ç–µ–ø–µ–Ω–∏', value: '2' },
                { text: '–°–æ–≤—Å–µ–º –Ω–µ —Å–ø–æ—Å–æ–±–µ–Ω', value: '3' }
            ],
            9: [ // –í–æ–ø—Ä–æ—Å 10
                { text: '–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –≤—Å–µ –≤—Ä–µ–º—è', value: '0' },
                { text: '–ò–Ω–æ–≥–¥–∞', value: '1' },
                { text: '–û—á–µ–Ω—å —Ä–µ–¥–∫–æ', value: '2' },
                { text: '–°–æ–≤—Å–µ–º –Ω–µ –∏—Å–ø—ã—Ç—ã–≤–∞—é', value: '3' }
            ],
            10: [ // –í–æ–ø—Ä–æ—Å 11
                { text: '–°–æ–≤—Å–µ–º –Ω–µ—Ç', value: '0' },
                { text: '–ò–Ω–æ–≥–¥–∞', value: '1' },
                { text: '–ß–∞—Å—Ç–æ', value: '2' },
                { text: '–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –≤—Å–µ –≤—Ä–µ–º—è', value: '3' }
            ],
            11: [ // –í–æ–ø—Ä–æ—Å 12
                { text: '–Ø —Å–ª–µ–∂—É –∑–∞ —Å–æ–±–æ–π —Ç–∞–∫ –∂–µ', value: '0' },
                { text: '–ú–æ–∂–µ—Ç –±—ã—Ç—å, —Å—Ç–∞–ª –º–µ–Ω—å—à–µ —É–¥–µ–ª—è—Ç—å –≤—Ä–µ–º–µ–Ω–∏', value: '1' },
                { text: '–Ø –Ω–µ —É–¥–µ–ª—è—é —ç—Ç–æ–º—É —Å—Ç–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏', value: '2' },
                { text: '–û–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ, —ç—Ç–æ —Ç–∞–∫', value: '3' }
            ],
            12: [ // –í–æ–ø—Ä–æ—Å 13
                { text: '–¢–æ—á–Ω–æ —Ç–∞–∫ –∂–µ, –∫–∞–∫ –æ–±—ã—á–Ω–æ', value: '0' },
                { text: '–î–∞, –Ω–æ –Ω–µ –≤ —Ç–æ–π —Å—Ç–µ–ø–µ–Ω–∏', value: '1' },
                { text: '–ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –º–µ–Ω—å—à–µ', value: '2' },
                { text: '–°–æ–≤—Å–µ–º —Ç–∞–∫ –Ω–µ —Å—á–∏—Ç–∞—é', value: '3' }
            ],
            13: [ // –í–æ–ø—Ä–æ—Å 14
                { text: '–ß–∞—Å—Ç–æ', value: '0' },
                { text: '–ò–Ω–æ–≥–¥–∞', value: '1' },
                { text: '–†–µ–¥–∫–æ', value: '2' },
                { text: '–û—á–µ–Ω—å —Ä–µ–¥–∫–æ', value: '3' }
            ]
        },
        getOptionsForQuestion(questionIndex) {
            return this.optionsByQuestion[questionIndex] || this.defaultOptions;
        }
    },
    test4: {
        questions: [
            '–ì–æ–ª–æ–≤–Ω—ã–µ –±–æ–ª–∏',
            '–ù–µ—Ä–≤–æ–∑–Ω–æ—Å—Ç—å –∏–ª–∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –¥—Ä–æ–∂—å',
            '–ü–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è –Ω–µ–ø—Ä–∏—è—Ç–Ω—ã–µ –Ω–µ–æ—Ç–≤—è–∑–Ω—ã–µ –º—ã—Å–ª–∏',
            '–°–ª–∞–±–æ—Å—Ç—å –∏–ª–∏ –≥–æ–ª–æ–≤–æ–∫—Ä—É–∂–µ–Ω–∏–µ',
            '–ü–æ—Ç–µ—Ä—è —Å–µ–∫—Å—É–∞–ª—å–Ω–æ–≥–æ –≤–ª–µ—á–µ–Ω–∏—è –∏–ª–∏ —É–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏—è',
            '–ß—É–≤—Å—Ç–≤–æ –Ω–µ–¥–æ–≤–æ–ª—å—Å—Ç–≤–∞ –¥—Ä—É–≥–∏–º–∏',
            '–û—â—É—â–µ–Ω–∏–µ, —á—Ç–æ –∫—Ç–æ-—Ç–æ –¥—Ä—É–≥–æ–π –º–æ–∂–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å –≤–∞—à–∏–º–∏ –º—ã—Å–ª—è–º–∏',
            '–û—â—É—â–µ–Ω–∏–µ, —á—Ç–æ –ø–æ—á—Ç–∏ –≤–æ –≤—Å–µ—Ö –≤–∞—à–∏—Ö –Ω–µ–ø—Ä–∏—è—Ç–Ω–æ—Å—Ç—è—Ö –≤–∏–Ω–æ–≤–∞—Ç—ã –¥—Ä—É–≥–∏–µ',
            '–ü—Ä–æ–±–ª–µ–º—ã —Å –ø–∞–º—è—Ç—å—é',
            '–í–∞—à–∞ –Ω–µ–±—Ä–µ–∂–Ω–æ—Å—Ç—å –∏–ª–∏ –Ω–µ—Ä—è—à–ª–∏–≤–æ—Å—Ç—å',
            '–õ–µ–≥–∫–æ –≤–æ–∑–Ω–∏–∫–∞—é—â–∞—è –¥–æ—Å–∞–¥–∞ –∏–ª–∏ —Ä–∞–∑–¥—Ä–∞–∂–µ–Ω–∏–µ',
            '–ë–æ–ª–∏ –≤ —Å–µ—Ä–¥—Ü–µ –∏–ª–∏ –≥—Ä—É–¥–Ω–æ–π –∫–ª–µ—Ç–∫–µ',
            '–ß—É–≤—Å—Ç–≤–æ —Å—Ç—Ä–∞—Ö–∞ –≤ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –º–µ—Å—Ç–∞—Ö –∏–ª–∏ –Ω–∞ —É–ª–∏—Ü–µ',
            '–£–ø–∞–¥–æ–∫ —Å–∏–ª –∏–ª–∏ –∑–∞—Ç–æ—Ä–º–æ–∂–µ–Ω–Ω–æ—Å—Ç—å',
            '–ú—ã—Å–ª–∏ –æ —Ç–æ–º, —á—Ç–æ–±—ã –ø–æ–∫–æ–Ω—á–∏—Ç—å —Å —Å–æ–±–æ–π',
            '–¢–æ, —á—Ç–æ –≤—ã —Å–ª—ã—à–∏—Ç–µ –≥–æ–ª–æ—Å–∞, –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ —Å–ª—ã—à–∞—Ç –¥—Ä—É–≥–∏–µ',
            '–î—Ä–æ–∂—å',
            '–ß—É–≤—Å—Ç–≤–æ, —á—Ç–æ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤—É –ª—é–¥–µ–π –Ω–µ–ª—å–∑—è –¥–æ–≤–µ—Ä—è—Ç—å',
            '–ü–ª–æ—Ö–æ–π –∞–ø–ø–µ—Ç–∏—Ç',
            '–°–ª–µ–∑–ª–∏–≤–æ—Å—Ç—å',
            '–ó–∞—Å—Ç–µ–Ω—á–∏–≤–æ—Å—Ç—å –∏–ª–∏ —Å–∫–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –≤ –æ–±—â–µ–Ω–∏–∏ —Å –ª–∏—Ü–∞–º–∏ –¥—Ä—É–≥–æ–≥–æ –ø–æ–ª–∞',
            '–û—â—É—â–µ–Ω–∏–µ, —á—Ç–æ –≤—ã –≤ –∑–∞–ø–∞–¥–Ω–µ –∏–ª–∏ –ø–æ–π–º–∞–Ω—ã',
            '–ù–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–π –∏ –±–µ—Å–ø—Ä–∏—á–∏–Ω–Ω—ã–π —Å—Ç—Ä–∞—Ö',
            '–í—Å–ø—ã—à–∫–∏ –≥–Ω–µ–≤–∞, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –Ω–µ —Å–º–æ–≥–ª–∏ —Å–¥–µ—Ä–∂–∞—Ç—å',
            '–ë–æ—è–∑–Ω—å –≤—ã–π—Ç–∏ –∏–∑ –¥–æ–º–∞ –æ–¥–Ω–æ–º—É',
            '–ß—É–≤—Å—Ç–≤–æ, —á—Ç–æ –≤—ã —Å–∞–º–∏ –≤–æ –º–Ω–æ–≥–æ–º –≤–∏–Ω–æ–≤–∞—Ç—ã',
            '–ë–æ–ª–∏ –≤ –ø–æ—è—Å–Ω–∏—Ü–µ',
            '–û—â—É—â–µ–Ω–∏–µ, —á—Ç–æ –∫—Ç–æ-—Ç–æ –≤–∞–º –º–µ—à–∞–µ—Ç —Å–¥–µ–ª–∞—Ç—å —á—Ç–æ-–ª–∏–±–æ',
            '–ß—É–≤—Å—Ç–≤–æ –æ–¥–∏–Ω–æ—á–µ—Å—Ç–≤–∞',
            '–ü–æ–¥–∞–≤–ª–µ–Ω–Ω–æ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ, ¬´—Ö–∞–Ω–¥—Ä–∞¬ª',
            '–ß—Ä–µ–∑–º–µ—Ä–Ω–æ–µ –±–µ—Å–ø–æ–∫–æ–π—Å—Ç–≤–æ –ø–æ —Ä–∞–∑–Ω—ã–º –ø–æ–≤–æ–¥–∞–º',
            '–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∏–Ω—Ç–µ—Ä–µ—Å–∞ –∫ —á–µ–º—É –±—ã —Ç–æ –Ω–∏ –±—ã–ª–æ',
            '–ß—É–≤—Å—Ç–≤–æ —Å—Ç—Ä–∞—Ö–∞',
            '–¢–æ, —á—Ç–æ –≤–∞—à–∏ —á—É–≤—Å—Ç–≤–∞ –ª–µ–≥–∫–æ –∑–∞–¥–µ—Ç—å',
            '–û—â—É—â–µ–Ω–∏–µ, —á—Ç–æ –¥—Ä—É–≥–∏–µ –ø—Ä–æ–Ω–∏–∫–∞—é—Ç –≤ –≤–∞—à–∏ –º—ã—Å–ª–∏',
            '–û—â—É—â–µ–Ω–∏–µ, —á—Ç–æ –¥—Ä—É–≥–∏–µ –Ω–µ –ø–æ–Ω–∏–º–∞—é—Ç –≤–∞—Å –∏–ª–∏ –Ω–µ —Å–æ—á—É–≤—Å—Ç–≤—É—é—Ç –≤–∞–º',
            '–û—â—É—â–µ–Ω–∏–µ, —á—Ç–æ –ª—é–¥–∏ –Ω–µ –¥—Ä—É–∂–µ–ª—é–±–Ω—ã –∏–ª–∏ –≤—ã –∏–º –Ω–µ –Ω—Ä–∞–≤–∏—Ç–µ—Å—å',
            '–ù–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –¥–µ–ª–∞—Ç—å –≤—Å–µ –æ—á–µ–Ω—å –º–µ–¥–ª–µ–Ω–Ω–æ, —á—Ç–æ–±—ã –Ω–µ –¥–æ–ø—É—Å—Ç–∏—Ç—å –æ—à–∏–±–∫–∏',
            '–°–∏–ª—å–Ω–æ–µ –∏–ª–∏ —É—á–∞—â–µ–Ω–Ω–æ–µ —Å–µ—Ä–¥—Ü–µ–±–∏–µ–Ω–∏–µ',
            '–¢–æ—à–Ω–æ—Ç–∞ –∏–ª–∏ —Ä–∞—Å—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –∂–µ–ª—É–¥–∫–∞',
            '–û—â—É—â–µ–Ω–∏–µ, —á—Ç–æ –≤—ã —Ö—É–∂–µ –¥—Ä—É–≥–∏—Ö',
            '–ë–æ–ª–∏ –≤ –º—ã—à—Ü–∞—Ö',
            '–û—â—É—â–µ–Ω–∏–µ, —á—Ç–æ –¥—Ä—É–≥–∏–µ –Ω–∞–±–ª—é–¥–∞—é—Ç –∑–∞ –≤–∞–º–∏ –∏–ª–∏ –≥–æ–≤–æ—Ä—è—Ç –æ –≤–∞—Å',
            '–¢–æ, —á—Ç–æ –≤–∞–º —Ç—Ä—É–¥–Ω–æ –∑–∞—Å–Ω—É—Ç—å',
            '–ü–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—å –ø—Ä–æ–≤–µ—Ä—è—Ç—å –∏ –ø–µ—Ä–µ–ø—Ä–æ–≤–µ—Ä—è—Ç—å —Ç–æ, —á—Ç–æ –≤—ã –¥–µ–ª–∞–µ—Ç–µ',
            '–¢—Ä—É–¥–Ω–æ—Å—Ç–∏ –≤ –ø—Ä–∏–Ω—è—Ç–∏–∏ —Ä–µ—à–µ–Ω–∏—è',
            '–ë–æ—è–∑–Ω—å –µ–∑–¥–∏—Ç—å –≤ –º–µ—Ç—Ä–æ, –∞–≤—Ç–æ–±—É—Å–∞—Ö –∏–ª–∏ –ø–æ–µ–∑–¥–∞—Ö',
            '–ó–∞—Ç—Ä—É–¥–Ω–µ–Ω–Ω–æ–µ –¥—ã—Ö–∞–Ω–∏–µ',
            '–ü—Ä–∏—Å—Ç—É–ø—ã –∂–∞—Ä–∞ –∏–ª–∏ –æ–∑–Ω–æ–±–∞',
            '–ù–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –∏–∑–±–µ–≥–∞—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –º–µ—Å—Ç –∏–ª–∏ –¥–µ–π—Å—Ç–≤–∏–π, —Ç–∞–∫ –∫–∞–∫ –æ–Ω–∏ –≤–∞—Å –ø—É–≥–∞—é—Ç'
        ],
        title: '–¢–µ—Å—Ç ‚Ññ4',
        options: [
            { text: '–°–æ–≤—Å–µ–º –Ω–µ—Ç', value: '0' },
            { text: '–ù–µ–º–Ω–æ–≥–æ', value: '1' },
            { text: '–£–º–µ—Ä–µ–Ω–Ω–æ', value: '2' },
            { text: '–°–∏–ª—å–Ω–æ', value: '3' },
            { text: '–û—á–µ–Ω—å —Å–∏–ª—å–Ω–æ', value: '4' }
        ],
        getOptionsForQuestion() {
            return this.options; // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–æ–≤ –¥–ª—è –≤—Å–µ—Ö –≤–æ–ø—Ä–æ—Å–æ–≤
        }
    }
};

// 4. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
const db = new sqlite3.Database('./survey.db', (err) => {
    if (err) {
        console.error('–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:', err.message);
    } else {
        console.log('–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö SQLite —É—Å–ø–µ—à–Ω–æ.');
        initializeDatabase();
    }
});

// 5. –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
function initializeDatabase() {
    const createTableQuery = `
        CREATE TABLE IF NOT EXISTS responses (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            chat_id INTEGER UNIQUE,
            username TEXT,
            full_name TEXT,
            age INTEGER,
            gender TEXT,
            taking_meds TEXT,
            meds_details TEXT,
            pregnant TEXT,
            stage TEXT,
            current_test TEXT,
            test1_answers TEXT,
            test2_answers TEXT,
            test3_answers TEXT,
            test4_answers TEXT,
            message_id INTEGER
        )
    `;

    db.run(createTableQuery, (err) => {
        if (err) {
            console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ç–∞–±–ª–∏—Ü—ã:', err);
        } else {
            console.log('–¢–∞–±–ª–∏—Ü–∞ responses —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–∞ –∏–ª–∏ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç.');
        }
    });
}

// –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
function isAdmin(chatId) {
    return admins.includes(chatId);
}

// –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
async function checkExistingUser(chatId) {
    return new Promise((resolve, reject) => {
        db.get('SELECT * FROM responses WHERE chat_id = ?', [chatId], (err, row) => {
            if (err) {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:', err);
                reject(err);
                return;
            }
            resolve(!!row); // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –≤ boolean: true –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, false –µ—Å–ª–∏ –Ω–µ—Ç
        });
    });
}

// –§—É–Ω–∫—Ü–∏—è –æ—á–∏—Å—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
async function clearUserData(chatId) {
    return new Promise((resolve, reject) => {
        db.run('DELETE FROM responses WHERE chat_id = ?', [chatId], (err) => {
            if (err) {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—á–∏—Å—Ç–∫–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:', err);
                reject(err);
                return;
            }
            resolve();
        });
    });
}

// –§—É–Ω–∫—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
async function saveResponse(chatId, data) {
    return new Promise((resolve, reject) => {
        const {
            username,
            full_name,
            age,
            gender,
            taking_meds,
            meds_details,
            pregnant,
            stage,
            current_test,
            message_id,
            test1_answers,
            test2_answers,
            test3_answers,
            test4_answers
        } = data;

        // –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—è–µ–º, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ –∑–∞–ø–∏—Å—å
        db.get('SELECT * FROM responses WHERE chat_id = ?', [chatId], (err, row) => {
            if (err) {
                reject(err);
                return;
            }

            if (row) {
                // –û–±–Ω–æ–≤–ª—è–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –∑–∞–ø–∏—Å—å
                const updateQuery = `
                    UPDATE responses SET
                        username = COALESCE(?, username),
                        full_name = COALESCE(?, full_name),
                        age = COALESCE(?, age),
                        gender = COALESCE(?, gender),
                        taking_meds = COALESCE(?, taking_meds),
                        meds_details = COALESCE(?, meds_details),
                        pregnant = COALESCE(?, pregnant),
                        stage = COALESCE(?, stage),
                        current_test = COALESCE(?, current_test),
                        message_id = COALESCE(?, message_id),
                        test1_answers = COALESCE(?, test1_answers),
                        test2_answers = COALESCE(?, test2_answers),
                        test3_answers = COALESCE(?, test3_answers),
                        test4_answers = COALESCE(?, test4_answers)
                    WHERE chat_id = ?
                `;

                db.run(updateQuery, [
                    username,
                    full_name,
                    age,
                    gender,
                    taking_meds,
                    meds_details,
                    pregnant,
                    stage,
                    current_test,
                    message_id,
                    test1_answers,
                    test2_answers,
                    test3_answers,
                    test4_answers,
                    chatId
                ], (err) => {
                    if (err) reject(err);
                    else resolve();
                });
            } else {
                // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—É—é –∑–∞–ø–∏—Å—å
                const insertQuery = `
                    INSERT INTO responses (
                        chat_id,
                        username,
                        full_name,
                        age,
                        gender,
                        taking_meds,
                        meds_details,
                        pregnant,
                        stage,
                        current_test,
                        message_id,
                        test1_answers,
                        test2_answers,
                        test3_answers,
                        test4_answers
                    ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
                `;

                db.run(insertQuery, [
                    chatId,
                    username,
                    full_name,
                    age,
                    gender,
                    taking_meds,
                    meds_details,
                    pregnant,
                    stage,
                    current_test,
                    message_id,
                    test1_answers,
                    test2_answers,
                    test3_answers,
                    test4_answers
                ], (err) => {
                    if (err) reject(err);
                    else resolve();
                });
            }
        });
    });
}

// 6. –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /start
bot.onText(/\/start/, async (msg) => {
    const chatId = msg.chat.id;
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —É–∂–µ –∑–∞–ø–∏—Å—å –¥–ª—è —ç—Ç–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    const existingUser = await checkExistingUser(chatId);
    if (existingUser) {
        await clearUserData(chatId);
    }

    let keyboard = [
        [{ text: '–ù–∞—á–∞—Ç—å', callback_data: 'start_test' }]
    ];

    // –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É "–ë–∞–∑–∞" —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
    if (isAdmin(chatId)) {
        keyboard.push([{ text: '–ë–∞–∑–∞', callback_data: 'export_database' }]);
    }

    const message = await bot.sendMessage(chatId, 
        `–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é –≤–∞—Å! –Ø –≤–∞—à –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ –≤ –±–æ—Ä—å–±–µ —Å —Ç—Ä–µ–≤–æ–≥–æ–π, —Å—Ç—Ä–µ—Å—Å–æ–º –∏ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ–º.

–° –º–æ–µ–π –ø–æ–º–æ—â—å—é –≤—ã —Å–º–æ–∂–µ—Ç–µ –ø—Ä–æ–π—Ç–∏ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã, —á—Ç–æ–±—ã –ª—É—á—à–µ –ø–æ–Ω—è—Ç—å —Å–≤–æ–µ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –∞ —Ç–∞–∫–∂–µ –ø–æ–ª—É—á–∏—Ç—å –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ –ø–æ–¥–æ–±—Ä–∞–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–∏–∫–∏ —Ä–µ–ª–∞–∫—Å–∞—Ü–∏–∏. –í–æ—Ç, —á—Ç–æ —è –º–æ–≥—É —Å–¥–µ–ª–∞—Ç—å –¥–ª—è –≤–∞—Å:
‚Ä¢ –°–ø—Ä–∞–≤–∏—Ç—å—Å—è —Å —Ç—Ä–µ–≤–æ–≥–æ–π, —Å—Ç—Ä–µ—Å—Å–æ–º –∏ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ–º.
‚Ä¢ –û–±–ª–µ–≥—á–∏—Ç—å —Å–∏–º–ø—Ç–æ–º—ã —Å–∏–Ω–¥—Ä–æ–º–∞ —Ä–∞–∑–¥—Ä–∞–∂–µ–Ω–Ω–æ–≥–æ –∫–∏—à–µ—á–Ω–∏–∫–∞ (–°–†–ö).
‚Ä¢ –£–ª—É—á—à–∏—Ç—å –≤–∞—à–µ –æ–±—â–µ–µ —Å–∞–º–æ—á—É–≤—Å—Ç–≤–∏–µ –∏ –≤–µ—Ä–Ω—É—Ç—å —á—É–≤—Å—Ç–≤–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ —Å–ø–æ–∫–æ–π—Å—Ç–≤–∏—è.

–ß—Ç–æ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ?
‚Ä¢ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏, –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–µ –Ω–∞ –≤–∞—à–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö.
‚Ä¢ –ü—Ä–æ—Å—Ç—ã–µ –∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã —Ä–∞—Å—Å–ª–∞–±–ª–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –ª–µ–≥–∫–æ –≤–∫–ª—é—á–∏—Ç—å –≤ —Å–≤–æ—é –∂–∏–∑–Ω—å.
‚Ä¢ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å —Å–µ–±—è –ª—É—á—à–µ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å.
–ì–æ—Ç–æ–≤—ã –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å? –î–∞–≤–∞–π—Ç–µ –Ω–∞—á–Ω–µ–º –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å!`, {
        reply_markup: {
            inline_keyboard: keyboard
        }
    });

    await saveResponse(chatId, { 
        message_id: message.message_id,
        current_test: 'start',
        stage: 'start'
    });
});

// 7. –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /baza
bot.onText(/\/baza/, async (msg) => {
    const chatId = msg.chat.id;
    if (isAdmin(chatId)) {
        await exportDatabase(chatId);
    } else {
        await bot.sendMessage(chatId, '–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–æ–π –∫–æ–º–∞–Ω–¥—ã.');
    }
});

// 8. –û—Å–Ω–æ–≤–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ callback_query –¥–ª—è –∫–Ω–æ–ø–æ–∫
bot.on('callback_query', async (query) => {
    const chatId = query.message.chat.id;
    const data = query.data;

    try {
        // –£–¥–∞–ª—è–µ–º –ø—Ä–µ–¥—ã–¥—É—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∫–Ω–æ–ø–∫–∞–º–∏
        const prevMessageId = await getLastMessageId(chatId);
        if (prevMessageId) {
            await bot.deleteMessage(chatId, prevMessageId).catch(() => {});
        }

        if (data === 'export_database') {
            if (isAdmin(chatId)) {
                await exportDatabase(chatId);
                return;
            }
        }

        if (data === 'start_test') {
            const message = await bot.sendMessage(chatId, '–î–∞–≤–∞–π—Ç–µ –ø–æ–∑–Ω–∞–∫–æ–º–∏–º—Å—è, –Ω–∞–ø–∏—à–∏—Ç–µ –≤–∞—à–µ –§–ò–û (–§–∞–º–∏–ª–∏—è –ò–º—è –û—Ç—á–µ—Å—Ç–≤–æ).');
            await saveResponse(chatId, { 
                stage: 'full_name', 
                username: query.from.username,
                message_id: message.message_id 
            });
        } else if (data === 'male' || data === 'female') {
            const message = await bot.sendMessage(chatId, '–ü—Ä–∏–Ω–∏–º–∞–µ—Ç–µ —Å–µ–π—á–∞—Å –ø—Ä–µ–ø–∞—Ä–∞—Ç—ã?', {
                reply_markup: {
                    inline_keyboard: [
                        [{ text: '–î–∞', callback_data: 'meds_yes' }],
                        [{ text: '–ù–µ—Ç', callback_data: 'meds_no' }]
                    ]
                }
            });
            await saveResponse(chatId, { 
                gender: data, 
                stage: 'taking_meds',
                message_id: message.message_id 
            });
        } else if (data === 'meds_yes') {
            const message = await bot.sendMessage(chatId, '–ö–∞–∫–∏–µ –ø—Ä–µ–ø–∞—Ä–∞—Ç—ã?');
            await saveResponse(chatId, { 
                taking_meds: 'yes',
                stage: 'meds_details',
                message_id: message.message_id 
            });
        } else if (data === 'meds_no') {
            await saveResponse(chatId, { taking_meds: 'no' });
            const userGender = await getUserGender(chatId);
            if (userGender === 'female') {
                const message = await bot.sendMessage(chatId, '–í—ã –±–µ—Ä–µ–º–µ–Ω–Ω—ã?', {
                    reply_markup: {
                        inline_keyboard: [
                            [{ text: '–î–∞', callback_data: 'pregnant_yes' }],
                            [{ text: '–ù–µ—Ç', callback_data: 'pregnant_no' }]
                        ]
                    }
                });
                await saveResponse(chatId, { 
                    stage: 'pregnant',
                    message_id: message.message_id 
                });
            } else {
                await startNextTest(chatId, 'test1');
            }
        } else if (data === 'pregnant_yes' || data === 'pregnant_no') {
            await saveResponse(chatId, { pregnant: data === 'pregnant_yes' ? 'yes' : 'no' });
            await startNextTest(chatId, 'test1');
        } else if (data.startsWith('start_test_')) {
            const testNum = data.split('_')[2];
            await askTestQuestion(chatId, `test${testNum}`, 0);
        } else if (data.startsWith('answer_')) {
            // –ù–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç: answer_testNumber_questionIndex_value
            const [_, testNumber, questionIndex, value] = data.split('_');
            await handleTestAnswer(chatId, testNumber, parseInt(questionIndex), value);
        }
    } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –≤ –æ–±—Ä–∞–±–æ—Ç–∫–µ callback_query:', error);
        bot.sendMessage(chatId, '–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞ /start');
    }
});

// 9. –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã —Å –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏ –æ—Ç–≤–µ—Ç–æ–≤

function createAnswerKeyboard(testNumber, questionIndex) {
    const test = tests[testNumber];
    
    if (test.type === 'binary') {
        return {
            inline_keyboard: test.options.map(option => [
                {
                    text: option.text,
                    callback_data: `answer_${testNumber}_${questionIndex}_${option.value}`
                }
            ])
        };
    } else {
        // –î–ª—è —Ç–µ—Å—Ç–æ–≤ —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º –≤—ã–±–æ—Ä–æ–º –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –¥–ª—è –≤–æ–ø—Ä–æ—Å–∞ –≤–∞—Ä–∏–∞–Ω—Ç—ã
        const options = test.getOptionsForQuestion(questionIndex);
        return {
            inline_keyboard: options.map(option => [
                {
                    text: option.text,
                    callback_data: `answer_${testNumber}_${questionIndex}_${option.value}`
                }
            ])
        };
    }
}

// 10. –§—É–Ω–∫—Ü–∏—è –¥–ª—è –Ω–∞—á–∞–ª–∞ —Å–ª–µ–¥—É—é—â–µ–≥–æ —Ç–µ—Å—Ç–∞
async function startNextTest(chatId, testNumber) {
    try {
        if (!tests[testNumber]) {
            throw new Error(`–¢–µ—Å—Ç ${testNumber} –Ω–µ –Ω–∞–π–¥–µ–Ω`);
        }

        const test = tests[testNumber];
        const messageText = testNumber === 'test1' 
            ? `–û—Ç–ª–∏—á–Ω–æ! –î–∞–≤–∞–π—Ç–µ –Ω–∞—á–Ω–µ–º –ø–µ—Ä–≤—ã–π —Ç–µ—Å—Ç.\n\n${test.title}`
            : `–°–ø–∞—Å–∏–±–æ –∑–∞ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —Ç–µ—Å—Ç–∞! –î–∞–≤–∞–π—Ç–µ –ø—Ä–æ–¥–æ–ª–∂–∏–º.\n\n${test.title}`;

        const message = await bot.sendMessage(chatId, messageText, {
            reply_markup: {
                inline_keyboard: [
                    [{ 
                        text: testNumber === 'test1' ? '–ù–∞—á–∞—Ç—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ' : '–ù–∞—á–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–π —Ç–µ—Å—Ç', 
                        callback_data: `start_test_${testNumber.slice(-1)}` 
                    }]
                ]
            }
        });

        await saveResponse(chatId, { 
            current_test: testNumber,
            message_id: message.message_id,
            [`${testNumber}_answers`]: '[]'
        });

    } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Ç–µ—Å—Ç–∞:', error);
        await bot.sendMessage(chatId, '–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞ /start');
    }
}

// 11. –§—É–Ω–∫—Ü–∏—è –∑–∞–¥–∞–Ω–∏—è –≤–æ–ø—Ä–æ—Å–∞ —Ç–µ—Å—Ç–∞
async function askTestQuestion(chatId, testNumber, questionIndex) {
    const test = tests[testNumber];
    const question = test.questions[questionIndex];
    
    const message = await bot.sendMessage(
        chatId,
        `–í–æ–ø—Ä–æ—Å ${questionIndex + 1}/${test.questions.length}:\n${question}`,
        {
            reply_markup: createAnswerKeyboard(testNumber, questionIndex)
        }
    );
    
    await saveResponse(chatId, { 
        message_id: message.message_id,
        current_test: testNumber
    });
}

// 12. –§—É–Ω–∫—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –≤–æ–ø—Ä–æ—Å —Ç–µ—Å—Ç–∞
async function handleTestAnswer(chatId, testNumber, questionIndex, value) {
    try {
        const test = tests[testNumber];
        const answers = await getTestAnswers(chatId, testNumber);
        answers[questionIndex] = value;
        await saveTestAnswers(chatId, testNumber, answers);

        if (questionIndex + 1 < test.questions.length) {
            // –ó–∞–¥–∞–µ–º —Å–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å
            await askTestQuestion(chatId, testNumber, questionIndex + 1);
        } else {
            bot.sendMessage(chatId, "‚è≥ –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –æ–±—Ä–∞–±–æ—Ç–∫–∞, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥–æ–∂–¥–∏—Ç–µ...");
            // –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ–∫—É—â–µ–≥–æ —Ç–µ—Å—Ç–∞
            await analyzeAndSendResults(chatId, answers, testNumber);

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —Å–ª–µ–¥—É—é—â–∏–π —Ç–µ—Å—Ç
            const nextTestNumber = parseInt(testNumber.slice(-1)) + 1;
            if (nextTestNumber <= 4) {
                const message = await bot.sendMessage(
                    chatId,
                    '–•–æ—Ç–∏—Ç–µ –ø—Ä–æ–π—Ç–∏ —Å–ª–µ–¥—É—é—â–∏–π —Ç–µ—Å—Ç?',
                    {
                        reply_markup: {
                            inline_keyboard: [
                                [{ text: '–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å', callback_data: `start_test_${nextTestNumber}` }]
                            ]
                        }
                    }
                );
                await saveResponse(chatId, { message_id: message.message_id });
            } else {
                // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–≤–µ—Ä—à–∏–ª –≤—Å–µ —Ç–µ—Å—Ç—ã
                const allAnswers = await getAllTestAnswers(chatId); // –ü–æ–ª—É—á–∞–µ–º –æ—Ç–≤–µ—Ç—ã –Ω–∞ –≤—Å–µ —Ç–µ—Å—Ç—ã
                await analyzeAllTestsAndSendResults(chatId, allAnswers); // –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –≤—Å–µ —Ç–µ—Å—Ç—ã
                await bot.sendMessage(chatId, '–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã –ø—Ä–æ—à–ª–∏ –≤—Å–µ —Ç–µ—Å—Ç—ã. –°–ø–∞—Å–∏–±–æ –∑–∞ —É—á–∞—Å—Ç–∏–µ!');

                // –ó–∞–ø—É—Å–∫–∞–µ–º –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–∞ –æ —Å–∞–º–æ—á—É–≤—Å—Ç–≤–∏–∏ —á–µ—Ä–µ–∑ 2 –¥–Ω—è
                const followUpDate = new Date(Date.now() + 2 * 24 * 60 * 60 * 1000); // –ß–µ—Ä–µ–∑ 2 –¥–Ω—è
                // const followUpDate = new Date(Date.now() + 1 * 60 * 1000);

                schedule.scheduleJob(followUpDate, async () => {
                    await sendFollowUpMessage(chatId);
                });
            }
        }
    } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –æ—Ç–≤–µ—Ç–∞:', error);
        await bot.sendMessage(chatId, '–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞ /start');
    }
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤–æ–ø—Ä–æ—Å–∞ –æ —Å–∞–º–æ—á—É–≤—Å—Ç–≤–∏–∏
async function sendFollowUpMessage(chatId) {
    try {
        const message = await bot.sendMessage(
            chatId,
            `–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é!
–ö–∞–∫ –≤—ã —Å–µ–≥–æ–¥–Ω—è? –£–¥–µ–ª–∏—Ç—å —Å–µ–±–µ —Ö–æ—Ç—è –±—ã 10‚Äì20 –º–∏–Ω—É—Ç –≤ –¥–µ–Ω—å –¥–ª—è —Ä–∞—Å—Å–ª–∞–±–ª–µ–Ω–∏—è ‚Äî —ç—Ç–æ –º–∞–ª–µ–Ω—å–∫–∏–π —à–∞–≥ –∫ –±–æ–ª—å—à–æ–º—É –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–º—É —Å–ø–æ–∫–æ–π—Å—Ç–≤–∏—é. –î–∞–≤–∞–π—Ç–µ –≤–º–µ—Å—Ç–µ —Å–¥–µ–ª–∞–µ–º —ç—Ç–æ—Ç –¥–µ–Ω—å –Ω–µ–º–Ω–æ–≥–æ –ª–µ–≥—á–µ –∏ –≥–∞—Ä–º–æ–Ω–∏—á–Ω–µ–µ. –ü—Ä–∏—Å—Ç—É–ø–∏–º? üíô
            `,
            {
                reply_markup: {
                    inline_keyboard: [
                        [
                            { text: "–°–µ–π—á–∞—Å –Ω–µ –≥–æ—Ç–æ–≤(–∞)", callback_data: "relaxation_yes" },
                            { text: "–î–∞, –¥–∞–≤–∞–π—Ç–µ!", callback_data: "relaxation_no" }
                        ]
                    ]
                }
            }
        );

    } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –≤–æ–ø—Ä–æ—Å–∞ –æ —Å–∞–º–æ—á—É–≤—Å—Ç–≤–∏–∏:', error);
    }
}

// –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –≤–æ–ø—Ä–æ—Å –æ —Å–∞–º–æ—á—É–≤—Å—Ç–≤–∏–∏
bot.on('callback_query', async (callbackQuery) => {
    const { data, message } = callbackQuery;
    const chatId = message.chat.id;

    if (data === "relaxation_yes") {
        await bot.sendMessage(
            chatId,
            "–•–æ—Ä–æ—à–æ, –∫–æ–≥–¥–∞ –≤—ã –±—É–¥–µ—Ç–µ –≥–æ—Ç–æ–≤—ã, –¥–∞–≤–∞–π—Ç–µ –≤–º–µ—Å—Ç–µ —Å–¥–µ–ª–∞–µ–º —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ. –ù–∞–π–¥–∏—Ç–µ –º–æ–º–µ–Ω—Ç, —á—Ç–æ–±—ã —É–¥–µ–ª–∏—Ç—å –≤—Ä–µ–º—è —Å–≤–æ–µ–º—É —Å–ø–æ–∫–æ–π—Å—Ç–≤–∏—é ‚Äî —ç—Ç–æ –≤—Å–µ–≥–¥–∞ –≤–∞–∂–Ω–æ."
        );
        const followUpDate = new Date(Date.now() + 2 * 24 * 60 * 60 * 1000); // –ß–µ—Ä–µ–∑ 2 –¥–Ω—è
        // const followUpDate = new Date(Date.now() + 1 * 60 * 1000);

        schedule.scheduleJob(followUpDate, async () => {
            await sendFollowUpMessage(chatId);
        });
    } else if (data === "relaxation_no") {
        await bot.sendMessage(
            chatId,
             `–¢–µ—Ö–Ω–∏–∫–∏ —Ä–µ–ª–∞–∫—Å–∞—Ü–∏–∏
–í–æ—Ç —Ç—Ä–∏ —Ç–µ—Ö–Ω–∏–∫–∏ —Ä–µ–ª–∞–∫—Å–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å –ø–æ–ª–µ–∑–Ω—ã –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

1. –ì–ª—É–±–æ–∫–æ–µ –¥—ã—Ö–∞–Ω–∏–µ: –ü—Ä–∞–∫—Ç–∏–∫–∞ –≥–ª—É–±–æ–∫–æ–≥–æ –¥—ã—Ö–∞–Ω–∏—è –ø–æ–º–æ–≥–∞–µ—Ç —Å–Ω–∏–∑–∏—Ç—å —É—Ä–æ–≤–µ–Ω—å —Å—Ç—Ä–µ—Å—Å–∞ –∏ —É–ª—É—á—à–∏—Ç—å –æ–±—â–µ–µ —Å–∞–º–æ—á—É–≤—Å—Ç–≤–∏–µ. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –≤–¥—ã—Ö–∞—Ç—å –º–µ–¥–ª–µ–Ω–Ω–æ —á–µ—Ä–µ–∑ –Ω–æ—Å –Ω–∞ 4 —Å—á–µ—Ç–∞, –∑–∞–¥–µ—Ä–∂–∏–≤–∞—Ç—å –¥—ã—Ö–∞–Ω–∏–µ –Ω–∞ 4 —Å—á–µ—Ç–∞, –∑–∞—Ç–µ–º –≤—ã–¥—ã—Ö–∞—Ç—å —á–µ—Ä–µ–∑ —Ä–æ—Ç –Ω–∞ 4 —Å—á–µ—Ç–∞. –ü–æ–≤—Ç–æ—Ä—è—Ç—å 5-10 —Ä–∞–∑.

2. –ü—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω–∞—è –º—ã—à–µ—á–Ω–∞—è —Ä–µ–ª–∞–∫—Å–∞—Ü–∏—è: –≠—Ç–∞ —Ç–µ—Ö–Ω–∏–∫–∞ –≤–∫–ª—é—á–∞–µ—Ç –ø–æ–æ—á–µ—Ä–µ–¥–Ω–æ–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –∏ —Ä–∞—Å—Å–ª–∞–±–ª–µ–Ω–∏–µ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –≥—Ä—É–ø–ø –º—ã—à—Ü. –ù–∞—á–Ω–∏—Ç–µ —Å –Ω–æ–≥ –∏ –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –ø–æ–¥–Ω–∏–º–∞–π—Ç–µ—Å—å –∫ –≥–æ–ª–æ–≤–µ. –≠—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç —Å–Ω—è—Ç—å —Ñ–∏–∑–∏—á–µ—Å–∫–æ–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –∏ —É–ª—É—á—à–∏—Ç—å –æ–±—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ.

3. –ú–µ–¥–∏—Ç–∞—Ü–∏—è –∏–ª–∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è: –ù–∞–π–¥–∏—Ç–µ —Ç–∏—Ö–æ–µ –º–µ—Å—Ç–æ, –∑–∞–∫—Ä–æ–π—Ç–µ –≥–ª–∞–∑–∞ –∏ —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á—å—Ç–µ—Å—å –Ω–∞ —Å–≤–æ–µ–º –¥—ã—Ö–∞–Ω–∏–∏ –∏–ª–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ —Å–ø–æ–∫–æ–π–Ω–æ–µ –∏ –ø—Ä–∏—è—Ç–Ω–æ–µ –º–µ—Å—Ç–æ. –≠—Ç–æ –º–æ–∂–µ—Ç –ø–æ–º–æ—á—å —Å–Ω—è—Ç—å –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –∏ —É–º–µ–Ω—å—à–∏—Ç—å —Ç—Ä–µ–≤–æ–∂–Ω–æ—Å—Ç—å.`
        );
    }
});

async function analyzeAllTestsAndSendResults(chatId) {
    try {
        // –ò–∑–≤–ª–µ–∫–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –æ—Ç–≤–µ—Ç—ã –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
        const userProfile = await getUserProfile(chatId);
        const userData = await new Promise((resolve, reject) => {
            db.get(
                'SELECT test1_answers, test2_answers, test3_answers, test4_answers FROM responses WHERE chat_id = ?',
                [chatId],
                (err, row) => {
                    if (err) return reject(err);
                    resolve(row);
                }
            );
        });

        if (!userData) {
            throw new Error('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.');
        }

        // –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞
        let context = `–ê–Ω–∞–ª–∏–∑ –≤—Å–µ—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ç–µ—Å—Ç–æ–≤\n\n`;
        context += `–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:\n`;
        context += `–í–æ–∑—Ä–∞—Å—Ç: ${userProfile.age}\n`;
        context += `–ü–æ–ª: ${userProfile.gender === 'male' ? '–º—É–∂—Å–∫–æ–π' : '–∂–µ–Ω—Å–∫–∏–π'}\n`;
        context += `–ü—Ä–∏–Ω–∏–º–∞–µ—Ç –º–µ–¥–∏–∫–∞–º–µ–Ω—Ç—ã: ${userProfile.taking_meds === 'yes' ? '–¥–∞' : '–Ω–µ—Ç'}\n`;
        context += `–ü—Ä–µ–¥–ª–æ–∂–∏ 1 –Ω–∞–∏–±–æ–ª–µ–µ –ø–æ–¥—Ö–æ–¥—è—â–∏–µ —Ç–µ—Ö–Ω–∏–∫—É —Ä–µ–ª–∞–∫—Å–∞—Ü–∏–∏ –∏–∑ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö —Ç–µ—Ö–Ω–∏–∫ —Ä–µ–ª–∞–∫—Å–∞—Ü–∏–∏, —Ç–µ–±–µ –Ω—É–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –æ–¥–Ω—É –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –µ–µ —Ç–∞–∫, –∫–∞–∫ –æ–Ω–∞ –∏ –Ω–∞–ø–∏—Å–∞–Ω–∞

        '1. –¶–≤–µ—Ç–Ω–æ–µ –¥—ã—Ö–∞–Ω–∏–µ
        –°–ø–æ–∫–æ–∏ÃÜ—Å—Ç–≤–∏–µ –º–æ–∂–µ—Ç –∞—Å—Å–æ—Ü–∏–∏—Ä–æ–≤–∞—Ç—å—Å—è —Å —Å–∞–º—ã–º–∏ —Ä–∞–∑–Ω—ã–º–∏ —Ü–≤–µ—Ç–∞–º–∏ –∏ –æ—Ç—Ç–µ–Ω–∫–∞–º–∏. –≠—Ç–æ—Ç —Ñ–∞–∫—Ç –µ—â–µ —Ä–∞–∑ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤–∞–∂–Ω–æ—Å—Ç—å –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞
        –≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –ª—é–±—ã—Ö –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º—ã—Ö –Ω–∞ —Ç—Ä–µ–Ω–∏–Ω–≥–µ –∏–ª–∏ –≤ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–∏ÃÜ –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–µ —Ç–µ—Ö–Ω–∏–∫. –ü–æ—Å–ª–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É—é –ø—Ä–∏–Ω—è—Ç—å —Ä–∞—Å—Å–ª–∞–±–ª–µ–Ω–Ω—É—é –ø–æ–∑—É –∏ —Å–∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –Ω–∞ –¥—ã—Ö–∞–Ω–∏–∏. –ö–æ–≥–¥–∞ –¥—ã—Ö–∞–Ω–∏–µ —Å—Ç–∞–ª–æ —Å–ø–æ–∫–æ–∏ÃÜ–Ω—ã–º –∏ —Ä–æ–≤–Ω—ã–º, –ø—Ä–µ–¥–ª–∞–≥–∞—é —Å–ª–µ–¥—É—é—â—É—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é: ¬´–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, —á—Ç–æ —Å –∫–∞–∂–¥—ã–º –≤–¥–æ—Ö–æ–º –≤ –≤–∞—Å –≤–ª–∏–≤–∞–µ—Ç—Å—è —ç–Ω–µ—Ä–≥–∏—è —Å–ø–æ–∫–æ–∏ÃÜ—Å—Ç–≤–∏—è, –æ–∫—Ä–∞—à–µ–Ω–Ω–∞—è –≤ —Ç–æ—Ç —Ü–≤–µ—Ç, —Å –∫–æ—Ç–æ—Ä—ã–º —É –≤–∞—Å —ç—Ç–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∞—Å—Å–æ—Ü–∏–∏—Ä–æ–≤–∞–ª–æ—Å—å¬ª. –¢–∞–∫–æ–µ –¥—ã—Ö–∞–Ω–∏–µ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è –≤ —Ç–µ—á–µ–Ω–∏–µ 1-2 –º–∏–Ω—É—Ç
        –î–∞–ª–µ–µ –æ—Ç–≤–µ—Ç—å—Ç–µ —Å–µ–±–µ, —Å —á–µ–º –∏–∑ —Ü–≤–µ—Ç–æ–≤ –∞—Å—Å–æ—Ü–∏–∏—Ä—É—é—Ç—Å—è –±–µ—Å–ø–æ–∫–æ–∏ÃÜ—Å—Ç–≤–æ, —Ç—Ä–µ–≤–æ–≥–∞. –ü—Ä–µ–¥–ª–∞–≥–∞–µ—Ç—Å—è –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å, –∫–∞–∫ –ø–æ—Å–ª–µ ¬´—Ü–≤–µ—Ç–Ω–æ–≥–æ¬ª –≤–¥–æ—Ö–∞ —Å–ª–µ–¥—É–µ—Ç –≤—ã–¥–æ—Ö, –æ–∫—Ä–∞—à–µ–Ω–Ω—ã–∏ÃÜ –≤ —Ü–≤–µ—Ç –±–µ—Å–ø–æ–∫–æ–∏ÃÜ—Å—Ç–≤–∞ –∏ —Ç—Ä–µ–≤–æ–≥–∏
        –ü–æ—Å–ª–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –º–æ–∂–Ω–æ –≤—Ç–æ—Ä—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º –∑–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å ¬´–í—ã —á—É–≤—Å—Ç–≤—É–µ—Ç–µ —Å–µ–±—è –ª—É—á—à–µ? –ï—Å–ª–∏ –Ω–µ—Ç, —Ç–æ –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –¥—Ä—É–≥—É—é —Ç–µ—Ö–Ω–∏–∫—É¬ª'
         
        '2. –î–∏–∞—Ñ—Ä–∞–≥–º–∞–ª—å–Ω–æ–µ –¥—ã—Ö–∞–Ω–∏–µ
        –õ—è–≥—Ç–µ –Ω–∞ —Å–ø–∏–Ω—É –∏–ª–∏ —Å—è–¥—å—Ç–µ –Ω–∞ —Å—Ç—É–ª —Å–æ —Å–ø–∏–Ω–∫–æ–π –ü–æ–ª–æ–∂–∏—Ç–µ –æ–¥–Ω—É –∏–ª–∏ –æ–±–µ —Ä—É–∫–∏ —Å–µ–±–µ –Ω–∞ –∂–∏–≤–æ—Ç. –ú–µ–¥–ª–µ–Ω–Ω–æ –∏ –≥–ª—É–±–æ–∫–æ –≤–¥–æ—Ö–Ω–∏—Ç–µ —á–µ—Ä–µ–∑ –Ω–æ—Å. –ñ–∏–≤–æ—Ç –¥–æ–ª–∂–µ–Ω –ø–æ–¥–Ω—è—Ç—å—Å—è, –Ω–æ –≤–µ—Ä—Ö–Ω—è—è —á–∞—Å—Ç—å –≥—Ä—É–¥–∏ –¥–æ–ª–∂–Ω–∞ –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è –Ω–µ–ø–æ–¥–≤–∏–∂–Ω–æ–∏ÃÜ –∏ —Ä–∞—Å—Å–ª–∞–±–ª–µ–Ω–Ω–æ.–ú–µ–¥–ª–µ–Ω–Ω–æ –≤—ã–¥–æ—Ö–Ω–∏—Ç–µ —á–µ—Ä–µ–∑ —Å–ª–æ–∂–µ–Ω–Ω—ã–µ –≤ —Ç—Ä—É–±–æ—á–∫—É –≥—É–±—ã (–±—É–¥—Ç–æ –∑–∞–¥—É–≤–∞–µ—Ç–µ —Å–≤–µ—á–∏). –í–º–µ—Å—Ç–µ —Å –≤—ã–¥–æ—Ö–æ–º –º–µ–¥–ª–µ–Ω–Ω–æ –∏ –∞–∫–∫—É—Ä–∞—Ç–Ω–æ –ø–æ–¥—Ç—è–≥–∏–≤–∞–∏ÃÜ—Ç–µ –∂–∏–≤–æ—Ç –∫ –ø–æ–∑–≤–æ–Ω–æ—á–Ω–∏–∫.–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ 5 —Ä–∞–∑'
        
        '3. ¬´–¢–µ—Ö–Ω–∏–∫–∞ —è–∫–æ—Ä–µ–Ω–∏—è¬ª
        –í—ã–±–µ—Ä–∏—Ç–µ –∫–∞–∫—É—é-–ª–∏–±–æ —Å–∏—Ç—É–∞—Ü–∏—é, –≤ –∫–æ—Ç–æ—Ä–æ–∏ÃÜ –≤—ã —Ö–æ—Ç–µ–ª–∏ –±—ã —Å–µ–±—è —á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å –±–æ–ª–µ–µ —É–≤–µ—Ä–µ–Ω–Ω–æ –∏–ª–∏ —Å–ø–æ–∫–æ–∏ÃÜ–Ω–æ –∏–ª–∏ –¥–µ–∏ÃÜ—Å—Ç–≤–æ–≤–∞—Ç—å –±–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ. –°–æ—Å—Ç–∞–≤—å—Ç–µ –¥–ª—è —Å–µ–±—è —Ñ–æ—Ä–º—É–ª—É —Å–∞–º–æ–≤–Ω—É—à–µ–Ω–∏—è. –°—è–¥—å—Ç–µ –ø–æ—É–¥–æ–±–Ω–µ–µ, —Ä–∞—Å—Å–ª–∞–±—å—Ç–µ—Å—å, –¥—ã—à–∏—Ç–µ –Ω–∏–∂–Ω–∏–º –∏–ª–∏ –ø–æ–ª–Ω—ã–º –¥—ã—Ö–∞–Ω–∏–µ–º. –ù–∞ –∫–∞–∂–¥–æ–º –≤—ã–¥–æ—Ö–µ –ø—Ä–æ–∏–∑–Ω–æ—Å–∏—Ç–µ –ø—Ä–æ —Å–µ–±—è —Å–≤–æ—é —Ñ—Ä–∞–∑—É —Å–∞–º–æ–≤–Ω—É—à–µ–Ω–∏—è. –î—ã—à–∏—Ç–µ —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º 3-5 –º–∏–Ω—É—Ç
        –ó–∞—Ç–µ–º, –Ω–∞—Ä–∏—Å—É–π—Ç–µ —Ñ–ª–æ–º–∞—Å—Ç–µ—Ä–∞–º–∏ –Ω–∞ –ª–∏—Å—Ç–µ –±—É–º–∞–≥–∏ (—Ñ–æ—Ä–º–∞—Ç –ê4) —Å–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–∞ –¥–∞–Ω–Ω—ã–∏ÃÜ –º–æ–º–µ–Ω—Ç
        –ß–∞—Å—Ç–æ —Ä–∏—Å—É—é—Ç –≤–∏–¥—ã –ø—Ä–∏—Ä–æ–¥—ã –∏–ª–∏ –º–æ—Ä—Å–∫–∏–µ –ø–µ–∏ÃÜ–∑–∞–∂–∏, —ç—Ç–æ –º–æ–≥—É—Ç –±—ã—Ç—å —Ç–∞–∫–∂–µ –∫–∞–∫–∏–µ-—Ç–æ —Å–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏—Ç—É–∞—Ü–∏–∏. –ù–∞ —Ä–∏—Å—É–Ω–∫–µ –Ω–∞–∏ÃÜ–¥–∏—Ç–µ –ø—Ä–µ–¥–º–µ—Ç –∏–ª–∏ –≤—ã–±—Ä–∏—Ç–µ –∫–∞–∫–æ–µ-—Ç–æ –º–µ—Å—Ç–æ, —è–≤–ª—è—é—â–µ–µ—Å—è –æ—Å–Ω–æ–≤–Ω—ã–º –∏—Å—Ç–æ—á–Ω–∏–∫–æ–º —Å–ø–æ–∫–æ–∏ÃÜ—Å—Ç–≤–∏—è –∏–ª–∏ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ –≤ —É—Å–ø–µ—à–Ω–æ–º —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–∏ —Å–∏—Ç—É–∞—Ü–∏–∏
        –ù–∞ –≤—Ç–æ—Ä–æ–º —Ä–∏—Å—É–Ω–∫–µ –∏–∑–æ–±—Ä–∞–∑–∏—Ç–µ –∫—Ä—É–ø–Ω–æ, –≤–æ –≤–µ—Å—å –ª–∏—Å—Ç, –≤—ã–±—Ä–∞–Ω–Ω—ã–∏ÃÜ —É—á–∞—Å—Ç–Ω–∏–∫–æ–º —Å–∏–º–≤–æ–ª —Å–ø–æ–∫–æ–∏ÃÜ—Å—Ç–≤–∏—è'

        '4. –†–µ–ª–∞–∫—Å–∞—Ü–∏—è –ø–æ –î–∂–µ–∫–æ–±—Å–æ–Ω—É
        –°—Ç—Ä–∞—Ö, –≥–Ω–µ–≤, —Ç—Ä–µ–≤–æ–≥–∞, –ø–∞–Ω–∏–∫–∞ –∏ –±–µ—Å–ø–æ–∫–æ–∏ÃÜ—Å—Ç–≤–æ —Å–æ–ø—Ä–æ–≤–æ–∂–¥–∞—é—Ç—Å—è –º—ã—à–µ—á–Ω—ã–º –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ–º, –∏ –µ—Å–ª–∏ –µ–≥–æ —É–±—Ä–∞—Ç—å, —Ç–æ –º–æ–∂–Ω–æ –ø–æ–≤–ª–∏—è—Ç—å –Ω–∞ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, —Ç–æ –µ—Å—Ç—å –¥–æ–±–∏—Ç—å—Å—è —É—Å–ø–æ–∫–æ–µ–Ω–∏—è. –£–ø—Ä–∞–∂–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è—Ç –∏–∑ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–≥–æ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –∏ —Ä–∞—Å—Å–ª–∞–±–ª–µ–Ω–∏—è —Ä–∞–∑–Ω—ã—Ö –≥—Ä—É–ø–ø –º—ã—à—Ü, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –æ–±—â–µ–º—É —É—Å–ø–æ–∫–æ–µ–Ω–∏—é.
        –ù–∞–ø—Ä—è–∂–µ–Ω–∏–µ –¥–ª–∏—Ç—Å—è 7 —Å–µ–∫—É–Ω–¥, —Ä–∞—Å—Å–ª–∞–±–ª–µ–Ω–∏–µ ‚Äî 30‚Äì40 —Å–µ–∫—É–Ω–¥, –ø—Ä–∏ —ç—Ç–æ–º, —Ä–∞—Å—Å–ª–∞–±–ª—è—è—Å—å, –Ω—É–∂–Ω–æ –ø–æ—Å—Ç–∞—Ä–∞—Ç—å—Å—è —Å–∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –Ω–∞ –æ—â—É—â–µ–Ω–∏—è—Ö, –∫–æ—Ç–æ—Ä—ã–µ –≤–æ–∑–Ω–∏–∫–∞—é—Ç –≤ —Ç–µ—Ö —á–∞—Å—Ç—è—Ö —Ç–µ–ª–∞, —Å –∫–æ—Ç–æ—Ä—ã–º–∏ –≤—ã —Ä–∞–±–æ—Ç–∞–µ—Ç–µ. –≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—â—É—â–µ–Ω–∏–µ —Ç–µ–ø–ª–∞, –ª–µ–≥–∫–æ—Å—Ç–∏, —Ç—è–∂–µ—Å—Ç–∏, –ø–æ–∫–∞–ª—ã–≤–∞–Ω–∏—è
         –ö–∞–∂–¥—ã–∏ÃÜ —Ä–∞–∑ –ø–æ—Å–ª–µ —Ä–∞—Å—Å–ª–∞–±–ª–µ–Ω–∏—è –∫ —Ä–∞–±–æ—á–µ–∏ÃÜ –≥—Ä—É–ø–ø–µ –º—ã—à—Ü –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –Ω–æ–≤–∞—è –≥—Ä—É–ø–ø–∞. –£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ –∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å —Å–∏–¥—è.
        –°–æ–∂–º–∏—Ç–µ –∏–∑–æ –≤—Å–µ—Ö —Å–∏–ª –∫—É–ª–∞–∫–∏, –¥–µ—Ä–∂–∞ –∏—Ö –Ω–∞ —É—Ä–æ–≤–Ω–µ –≥—Ä—É–¥–∏. –ü–æ—á—É–≤—Å—Ç–≤—É–∏ÃÜ—Ç–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –≤ –∫–∏—Å—Ç—è—Ö
        –†–∞—Å—Å–ª–∞–±—å—Ç–µ—Å—å. –ö–∞–∫–∏–µ —É –≤–∞—Å –æ—â—É—â–µ–Ω–∏—è –≤ –º—ã—à—Ü–∞—Ö? –ü–æ—Å—Ç–∞—Ä–∞–∏ÃÜ—Ç–µ—Å—å –≤–æ–∑–¥–µ—Ä–∂–∞—Ç—å—Å—è –æ—Ç –ª—é–±—ã—Ö –¥–≤–∏–∂–µ–Ω–∏–∏ÃÜ 30-40 —Å–µ–∫—É–Ω–¥.–°–æ–∂–º–∏—Ç–µ –∫—É–ª–∞–∫–∏, —Å–æ–≥–Ω–∏—Ç–µ —Ä—É–∫–∏ –≤ –ª—É—á–µ–∑–∞–ø—è—Å—Ç–Ω—ã—Ö —Å—É—Å—Ç–∞–≤–∞—Ö. –ü–æ—á—É–≤—Å—Ç–≤—É–∏ÃÜ—Ç–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –≤ –ø—Ä–µ–¥–ø–ª–µ—á—å—è—Ö
        –†–∞—Å—Å–ª–∞–±—å—Ç–µ—Å—å. –ö–∞–∫–∏–µ —É –≤–∞—Å –æ—â—É—â–µ–Ω–∏—è –≤ –º—ã—à—Ü–∞—Ö? –ü–æ—Å—Ç–∞—Ä–∞–∏ÃÜ—Ç–µ—Å—å –≤–æ–∑–¥–µ—Ä–∂–∞—Ç—å—Å—è –æ—Ç –ª—é–±—ã—Ö –¥–≤–∏–∂–µ–Ω–∏–∏ÃÜ 30-40 —Å–µ–∫—É–Ω–¥.–°–æ–∂–º–∏—Ç–µ –∫—É–ª–∞–∫–∏, —Å–æ–≥–Ω–∏—Ç–µ —Ä—É–∫–∏ –≤ –ª—É—á–µ–∑–∞–ø—è—Å—Ç–Ω—ã—Ö —Å—É—Å—Ç–∞–≤–∞—Ö –∏ –≤ –ª–æ–∫—Ç—è—Ö, –Ω–∞–ø—Ä—è–≥–∏—Ç–µ –±–∏—Ü–µ–ø—Å—ã
        –†–∞—Å—Å–ª–∞–±—å—Ç–µ—Å—å. –ö–∞–∫–∏–µ —É –≤–∞—Å –æ—â—É—â–µ–Ω–∏—è –≤ –º—ã—à—Ü–∞—Ö? –ü–æ—Å—Ç–∞—Ä–∞–∏ÃÜ—Ç–µ—Å—å –≤–æ–∑–¥–µ—Ä–∂–∞—Ç—å—Å—è –æ—Ç –ª—é–±—ã—Ö –¥–≤–∏–∂–µ–Ω–∏–∏ÃÜ 30-40 —Å–µ–∫—É–Ω–¥.–°–æ–∂–º–∏—Ç–µ –∫—É–ª–∞–∫–∏, —Å–æ–≥–Ω–∏—Ç–µ —Ä—É–∫–∏ –≤ –ª—É—á–µ–∑–∞–ø—è—Å—Ç–Ω—ã—Ö —Å—É—Å—Ç–∞–≤–∞—Ö –∏
        –≤ –ª–æ–∫—Ç—è—Ö, –Ω–∞–ø—Ä—è–≥–∏—Ç–µ –±–∏—Ü–µ–ø—Å—ã, —Å–≤–µ–¥–∏—Ç–µ –ª–æ–ø–∞—Ç–∫–∏ –∏ –æ–ø—É—Å—Ç–∏—Ç–µ –∏—Ö –≤–Ω–∏–∑. –ü–æ—á—É–≤—Å—Ç–≤—É–∏ÃÜ—Ç–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –≤ –≤–µ—Ä—Ö–Ω–∏—Ö –º—ã—à—Ü–∞—Ö —Å–ø–∏–Ω—ã
        –†–∞—Å—Å–ª–∞–±—å—Ç–µ—Å—å. –ö–∞–∫–∏–µ —É –≤–∞—Å –æ—â—É—â–µ–Ω–∏—è
        –≤ –º—ã—à—Ü–∞—Ö? –ü–æ—Å—Ç–∞—Ä–∞–∏ÃÜ—Ç–µ—Å—å –≤–æ–∑–¥–µ—Ä–∂–∞—Ç—å—Å—è –æ—Ç –ª—é–±—ã—Ö –¥–≤–∏–∂–µ–Ω–∏–∏ÃÜ 30-40 —Å–µ–∫—É–Ω–¥. –í—ã—Ç—è–Ω–∏—Ç–µ –Ω–æ–≥–∏ –ø–µ—Ä–µ–¥ —Å–æ–±–æ–∏ÃÜ, —Å–≤–µ–¥–∏—Ç–µ –Ω–æ—Å–∫–∏, –∞ –ø—è—Ç–∫–∏ —Ä–∞—Å—Å—Ç–∞–≤—å—Ç–µ, –ø—Ä–∏ —ç—Ç–æ–º –ø–∞–ª—å—Ü—ã –Ω–æ–≥ —Å–æ–≥–Ω–∏—Ç–µ, —á—Ç–æ–±—ã –æ–Ω–∏ —Å–º–æ—Ç—Ä–µ–ª–∏ –≤ –ø–æ–ª. –°–æ–≥–Ω–∏—Ç–µ –≥–æ–ª–µ–Ω–æ—Å—Ç–æ–ø–Ω—ã–∏ÃÜ —Å—É—Å—Ç–∞–≤, —á—Ç–æ–±—ã –Ω–æ—Å–æ–∫ —Ç—è–Ω—É–ª—Å—è –∫ –≤–∞–º, –∏ —Ç–µ–ø–µ—Ä—å –æ—Ç–æ—Ä–≤–∏—Ç–µ –≤—ã–ø—Ä—è–º–ª–µ–Ω–Ω—ã–µ –≤ –∫–æ–ª–µ–Ω–Ω–æ–º —Å—É—Å—Ç–∞–≤–µ –Ω–æ–≥–∏. –ü–æ—á—É–≤—Å—Ç–≤—É–∏ÃÜ—Ç–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –≤ –º—ã—à—Ü–∞—Ö –≥–æ–ª–µ–Ω–µ–∏ÃÜ –∏ –±–µ–¥–µ—Ä.
                  –†–∞—Å—Å–ª–∞–±—å—Ç–µ—Å—å. –ö–∞–∫–∏–µ —É –≤–∞—Å –æ—â—É—â–µ–Ω–∏—è –≤ –º—ã—à—Ü–∞—Ö? –ü–æ—Å—Ç–∞—Ä–∞–∏ÃÜ—Ç–µ—Å—å –≤–æ–∑–¥–µ—Ä–∂–∞—Ç—å—Å—è –æ—Ç –ª—é–±—ã—Ö –¥–≤–∏–∂–µ–Ω–∏–∏ÃÜ 30-40 —Å–µ–∫—É–Ω–¥
        –î–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã –≤–∞—à –æ—Ä–≥–∞–Ω–∏–∑–º —Ä–∞—Å—Å–ª–∞–±–∏–ª—Å—è, —á—Ç–æ–±—ã –≤—ã –∏—Å–ø—ã—Ç–∞–ª–∏ —Å–ø–æ–∫–æ–∏ÃÜ—Å—Ç–≤–∏–µ, –∞ —Ç—Ä–µ–≤–æ–∂–Ω—ã–µ –º—ã—Å–ª–∏ —É—à–ª–∏ –Ω–∞ –≤—Ç–æ—Ä–æ–∏ÃÜ –ø–ª–∞–Ω, –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ —ç—Ç–∏ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è 4‚Äì5 —Ä–∞–∑'\n`;
        if (userProfile.taking_meds === 'yes') {
            context += `–ü—Ä–µ–ø–∞—Ä–∞—Ç—ã: ${userProfile.meds_details}\n`;
        }
        if (userProfile.gender === 'female') {
            context += `–ë–µ—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç—å: ${userProfile.pregnant === 'yes' ? '–¥–∞' : '–Ω–µ—Ç'}\n`;
        }
        context += `\n–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤:\n`;

        // –ê–Ω–∞–ª–∏–∑ –∫–∞–∂–¥–æ–≥–æ —Ç–µ—Å—Ç–∞
        const testColumns = ['test1_answers', 'test2_answers', 'test3_answers', 'test4_answers'];
        for (const [index, column] of testColumns.entries()) {
            const testAnswers = userData[column] ? JSON.parse(userData[column]) : null;
            const testKey = `test_${index + 1}`;
            const test = tests[testKey];

            if (!test || !testAnswers) {
                context += `‚ö†Ô∏è –¢–µ—Å—Ç ${index + 1} –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –Ω–µ –ø—Ä–æ–π–¥–µ–Ω.\n\n`;
                continue;
            }

            context += `\n–¢–µ—Å—Ç ${index + 1}: ${test.title}\n`;
            test.questions.forEach((question, qIndex) => {
                context += `–í–æ–ø—Ä–æ—Å: ${question}\n`;

                // –ü–æ–ª—É—á–µ–Ω–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ –≤–æ–ø—Ä–æ—Å–∞
                const questionOptions = test.type === 'binary'
                    ? test.options
                    : test.getOptionsForQuestion
                        ? test.getOptionsForQuestion(qIndex)
                        : test.options;

                if (!questionOptions || questionOptions.length === 0) {
                    // context += `–û—Ç–≤–µ—Ç: –ù–µ —É–∫–∞–∑–∞–Ω–æ (–æ—à–∏–±–∫–∞ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Ç–µ—Å—Ç–∞)\n\n`;
                    return;
                }

                if (test.type === 'binary') {
                    // context += `–û—Ç–≤–µ—Ç: ${testAnswers[qIndex] === 'yes' ? '–î–∞' : '–ù–µ—Ç'}\n\n`;
                } else {
                    const option = questionOptions.find(opt => String(opt.value) === String(testAnswers[qIndex]));
                    // context += `–û—Ç–≤–µ—Ç: ${option ? option.text : '–ù–µ —É–∫–∞–∑–∞–Ω–æ'}\n\n`;
                }
            });

            // –°–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–µ —É–∫–∞–∑–∞–Ω–∏—è –¥–ª—è —Ç–µ—Å—Ç–∞
            context += getTestSpecificInstructions(testKey);
        }

        // –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –≤ GPT –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
        const completion = await openai.chat.completions.create({
            model: "gpt-4o-mini",
            messages: [{ role: "user", content: context }],
            temperature: 0.7,
            max_tokens: 2000
        });

        const analysis = completion.choices[0].message.content;
        // –û—Ç–ø—Ä–∞–≤–∫–∞ –∞–Ω–∞–ª–∏–∑–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
        await bot.sendMessage(
            chatId,
            `üìä –ü–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤:\n\n${analysis}`,
            { parse_mode: 'Markdown' }
        );

    } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∞–Ω–∞–ª–∏–∑–µ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤:', error);
        await bot.sendMessage(chatId, '–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –∞–Ω–∞–ª–∏–∑–µ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.');
    }
}

async function getAllTestAnswers(chatId) {
    try {
        const userData = await new Promise((resolve, reject) => {
            db.get(
                'SELECT test1_answers, test2_answers, test3_answers, test4_answers FROM responses WHERE chat_id = ?',
                [chatId],
                (err, row) => {
                    if (err) return reject(err);
                    resolve(row);
                }
            );
        });

        const allAnswers = {};
        const testAnswerColumns = ['test1_answers', 'test2_answers', 'test3_answers', 'test4_answers'];

        testAnswerColumns.forEach((column, index) => {
            if (userData[column]) {
                allAnswers[`test_${index + 1}`] = JSON.parse(userData[column]);
            }
        });

        return allAnswers;
    } catch (error) {
        console.error("–û—à–∏–±–∫–∞ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ –±–∞–∑—ã:", error);
        throw new Error("–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –æ—Ç–≤–µ—Ç—ã.");
    }
}

// 13. –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ —Ç–µ—Å—Ç
async function getTestAnswers(chatId, testNumber) {
    return new Promise((resolve, reject) => {
        db.get(`SELECT ${testNumber}_answers FROM responses WHERE chat_id = ?`, [chatId], (err, row) => {
            if (err) {
                reject(err);
                return;
            }
            try {
                resolve(row && row[`${testNumber}_answers`] ? 
                    JSON.parse(row[`${testNumber}_answers`]) : []);
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ –æ—Ç–≤–µ—Ç–æ–≤:', error);
                resolve([]);
            }
        });
    });
}

// 14. –§—É–Ω–∫—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –æ—Ç–≤–µ—Ç–æ–≤ —Ç–µ—Å—Ç–∞
async function saveTestAnswers(chatId, testNumber, answers) {
    return new Promise((resolve, reject) => {
        db.run(
            `UPDATE responses SET ${testNumber}_answers = ? WHERE chat_id = ?`,
            [JSON.stringify(answers), chatId],
            (err) => {
                if (err) reject(err);
                else resolve();
            }
        );
    });
}

// 15. –§—É–Ω–∫—Ü–∏—è –∞–Ω–∞–ª–∏–∑–∞ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
async function analyzeAndSendResults(chatId, answers, testNumber) {
    try {
        
        const userProfile = await getUserProfile(chatId);
        const test = tests[testNumber];
        
        if (!test) {
            throw new Error(`–¢–µ—Å—Ç —Å –Ω–æ–º–µ—Ä–æ–º ${testNumber} –Ω–µ –Ω–∞–π–¥–µ–Ω.`);
        }

        // –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
        let context = `–ê–Ω–∞–ª–∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ ${test.title}\n\n`;
        context += `–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:\n`;
        context += `–í–æ–∑—Ä–∞—Å—Ç: ${userProfile.age}\n`;
        context += `–ü–æ–ª: ${userProfile.gender === 'male' ? '–º—É–∂—Å–∫–æ–π' : '–∂–µ–Ω—Å–∫–∏–π'}\n`;
        context += `–ü—Ä–∏–Ω–∏–º–∞–µ—Ç –º–µ–¥–∏–∫–∞–º–µ–Ω—Ç—ã: ${userProfile.taking_meds === 'yes' ? '–¥–∞' : '–Ω–µ—Ç'}\n`;
        if (userProfile.taking_meds === 'yes') {
            context += `–ü—Ä–µ–ø–∞—Ä–∞—Ç—ã: ${userProfile.meds_details}\n`;
        }
        if (userProfile.gender === 'female') {
            context += `–ë–µ—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç—å: ${userProfile.pregnant === 'yes' ? '–¥–∞' : '–Ω–µ—Ç'}\n`;
        }

        context += `\n–û—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã:\n`;

        test.questions.forEach((question, index) => {
            context += `–í–æ–ø—Ä–æ—Å: ${question}\n`;

            // –ü–æ–ª—É—á–µ–Ω–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ –≤–æ–ø—Ä–æ—Å–∞
            const questionOptions = test.type === 'binary'
                ? test.options
                : test.getOptionsForQuestion 
                    ? test.getOptionsForQuestion(index) 
                    : test.options;

            if (!questionOptions || questionOptions.length === 0) {
                context += `–û—Ç–≤–µ—Ç: –ù–µ —É–∫–∞–∑–∞–Ω–æ (–æ—à–∏–±–∫–∞ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Ç–µ—Å—Ç–∞)\n\n`;
                return;
            }

            if (test.type === 'binary') {
                context += `–û—Ç–≤–µ—Ç: ${answers[index] === 'yes' ? '–î–∞' : '–ù–µ—Ç'}\n\n`;
            } else {
                // –ü—Ä–∏–≤–µ–¥–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
                const option = questionOptions.find(opt => String(opt.value) === String(answers[index]));
                context += `–û—Ç–≤–µ—Ç: ${option ? option.text : '–ù–µ —É–∫–∞–∑–∞–Ω–æ'}\n\n`;
            }
        });

        // –°–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–µ —É–∫–∞–∑–∞–Ω–∏—è –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
        context += getTestSpecificInstructions(testNumber);

        const completion = await openai.chat.completions.create({
            model: "gpt-4o-mini",
            messages: [{ role: "user", content: context }],
            temperature: 0.7,
            max_tokens: 1000
        });

        const analysis = completion.choices[0].message.content;
        
        await bot.sendMessage(chatId, 
            `üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã ${test.title}\n\n${analysis}`, 
            { parse_mode: 'Markdown' }
        );

    } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∞–Ω–∞–ª–∏–∑–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:', error);
        await bot.sendMessage(chatId, '–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –∞–Ω–∞–ª–∏–∑–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.');
    }
}

// 16. –§—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏—Ö –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–µ—Å—Ç–∞
function getTestSpecificInstructions(testNumber) {
    let instructions = `–ù–∞ –æ—Å–Ω–æ–≤–µ —ç—Ç–∏—Ö –¥–∞–Ω–Ω—ã—Ö:\n`;
    instructions += `1. –û—Ü–µ–Ω–∏ –ø—Å–∏—Ö–æ—ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è\n`;
    // instructions += `2. –ü—Ä–µ–¥–ª–æ–∂–∏ 3 –Ω–∞–∏–±–æ–ª–µ–µ –ø–æ–¥—Ö–æ–¥—è—â–∏–µ —Ç–µ—Ö–Ω–∏–∫–∏ —Ä–µ–ª–∞–∫—Å–∞—Ü–∏–∏\n`;
    // instructions += `2. –î–∞–π –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é —Å–æ—Å—Ç–æ—è–Ω–∏—è\n`;

    switch(testNumber) {
        case 'test1':
            // instructions += `3. –û–±—Ä–∞—Ç–∏ –æ—Å–æ–±–æ–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –æ–±—â–∏–π —É—Ä–æ–≤–µ–Ω—å —Ç—Ä–µ–≤–æ–∂–Ω–æ—Å—Ç–∏\n`;
            break;
        case 'test2':
            instructions += `–í—ã–¥–∞–π –∫–∞–Ω–∞–ª –≤–æ—Å–ø—Ä–∏—è—Ç–∏—è 
            –ö–ª—é—á –∫ —Ç–µ—Å—Ç—É –∞—É–¥–∏–∞–ª, –≤–∏–∑—É–∞–ª, –∫–∏–Ω–µ—Å—Ç–µ—Ç–∏–∫.
            ‚Ä¢ –í–∏–∑—É–∞–ª—å–Ω—ã–π –∫–∞–Ω–∞–ª –≤–æ—Å–ø—Ä–∏—è—Ç–∏—è: 1, 5, 8, 10, 12, 14, 19, 21, 23, 27, 31, 32, 39, 40, 42, 45.
            ‚Ä¢ –ê—É–¥–∏–∞–ª—å–Ω—ã–π –∫–∞–Ω–∞–ª –≤–æ—Å–ø—Ä–∏—è—Ç–∏—è: 2, 6, 7, 13, 15, 17, 20, 24, 26, 33, 34, 36, 37, 43, 46, 48.
            ‚Ä¢ –ö–∏–Ω–µ—Å—Ç–µ—Ç–∏—á–µ—Å–∫–∏–π –∫–∞–Ω–∞–ª –≤–æ—Å–ø—Ä–∏—è—Ç–∏—è: 3, 4, 9, 11, 16, 18, 22, 25, 28, 29, 30, 35, 38, 41, 44, 47.
            ‚Ä¢ –£—Ä–æ–≤–Ω–∏ –ø–µ—Ä—Ü–µ–ø—Ç–∏–≤–Ω–æ–π –º–æ–¥–∞–ª—å–Ω–æ—Å—Ç–∏ (–≤–µ–¥—É—â–µ–≥–æ —Ç–∏–ø–∞ –≤–æ—Å–ø—Ä–∏—è—Ç–∏—è) :
            ‚Ä¢ 13 –∏ –±–æ–ª–µ–µ ‚Äì –≤—ã—Å–æ–∫–∏–π;
            ‚Ä¢ 8-12 ‚Äì —Å—Ä–µ–¥–Ω–∏–π;
            ‚Ä¢ 7 –∏ –º–µ–Ω–µ–µ ‚Äì –Ω–∏–∑–∫–∏–π.\n`;
            break;
        case 'test3':
            // instructions += `3. –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π —Ñ–∏–∑–∏—á–µ—Å–∫–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –∫–∞—á–µ—Å—Ç–≤–æ —Å–Ω–∞\n`;
            break;
        case 'test4':
            // instructions += `3. –û—Ü–µ–Ω–∏ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –∫ —Å–∞–º–æ–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏\n`;
            break;
    }

    return instructions;
}

// 17. –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–∞ –≤ —Ç–µ–∫—Å—Ç
function formatAnswerText(test, value) {
    if (test.type === 'binary') {
        return value === 'yes' ? '–î–∞' : '–ù–µ—Ç';
    } else {
        const option = test.options.find(opt => opt.value === value);
        return option ? option.text : '–ù–µ —É–∫–∞–∑–∞–Ω–æ';
    }
}
// 18. –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
bot.on('message', async (msg) => {
    if (!msg.text || msg.text.startsWith('/')) return;

    const chatId = msg.chat.id;
    const text = msg.text;
    
    try {
        const userStage = await getUserStage(chatId);
        const prevMessageId = await getLastMessageId(chatId);

        if (prevMessageId) {
            await bot.deleteMessage(chatId, prevMessageId).catch(() => {});
        }

        switch (userStage) {
            case 'full_name':
                if (isValidFullName(text)) {
                    const message = await bot.sendMessage(chatId, '–°–∫–æ–ª—å–∫–æ –≤–∞–º –ª–µ—Ç?');
                    await saveResponse(chatId, { 
                        full_name: text, 
                        stage: 'age',
                        message_id: message.message_id 
                    });
                } else {
                    const message = await bot.sendMessage(chatId, 
                        '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–∫–∞–∂–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –§–ò–û (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á).');
                    await saveResponse(chatId, { message_id: message.message_id });
                }
                break;

            case 'age':
                const age = parseInt(text, 10);
                if (isValidAge(age)) {
                    const message = await bot.sendMessage(chatId, '–£–∫–∞–∂–∏—Ç–µ –≤–∞—à –ø–æ–ª.', {
                        reply_markup: {
                            inline_keyboard: [
                                [
                                    { text: '–ú—É–∂—á–∏–Ω–∞', callback_data: 'male' },
                                    { text: '–ñ–µ–Ω—â–∏–Ω–∞', callback_data: 'female' }
                                ]
                            ]
                        }
                    });
                    await saveResponse(chatId, { 
                        age, 
                        stage: 'gender',
                        message_id: message.message_id 
                    });
                } else {
                    const message = await bot.sendMessage(chatId, 
                        '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–∫–∞–∂–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –≤–æ–∑—Ä–∞—Å—Ç (1-120 –ª–µ—Ç).');
                    await saveResponse(chatId, { message_id: message.message_id });
                }
                break;

            case 'meds_details':
                const userGender = await getUserGender(chatId);
                await saveResponse(chatId, { meds_details: text });

                if (userGender === 'female') {
                    const message = await bot.sendMessage(chatId, '–í—ã –±–µ—Ä–µ–º–µ–Ω–Ω—ã?', {
                        reply_markup: {
                            inline_keyboard: [
                                [
                                    { text: '–î–∞', callback_data: 'pregnant_yes' },
                                    { text: '–ù–µ—Ç', callback_data: 'pregnant_no' }
                                ]
                            ]
                        }
                    });
                    await saveResponse(chatId, { 
                        stage: 'pregnant',
                        message_id: message.message_id 
                    });
                } else {
                    await startNextTest(chatId, 'test1');
                }
                break;
        }
    } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –≤ –æ–±—Ä–∞–±–æ—Ç–∫–µ —Å–æ–æ–±—â–µ–Ω–∏—è:', error);
        await bot.sendMessage(chatId, '–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞ /start');
    }
});

// 19. –§—É–Ω–∫—Ü–∏—è —ç–∫—Å–ø–æ—Ä—Ç–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
async function exportDatabase(chatId) {
    try {
        const workbook = new ExcelJS.Workbook();
        const worksheet = workbook.addWorksheet('Users');

        // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Å—Ç–æ–ª–±—Ü—ã
        worksheet.columns = [
            { header: 'Chat ID', key: 'chat_id' },
            { header: 'Username', key: 'username' },
            { header: '–§–ò–û', key: 'full_name' },
            { header: '–í–æ–∑—Ä–∞—Å—Ç', key: 'age' },
            { header: '–ü–æ–ª', key: 'gender' },
            { header: '–ü—Ä–∏–Ω–∏–º–∞–µ—Ç –ø—Ä–µ–ø–∞—Ä–∞—Ç—ã', key: 'taking_meds' },
            { header: '–ü—Ä–µ–ø–∞—Ä–∞—Ç—ã', key: 'meds_details' },
            { header: '–ë–µ—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç—å', key: 'pregnant' },
            { header: '–¢–µ—Å—Ç 1', key: 'test1_answers' },
            { header: '–¢–µ—Å—Ç 2', key: 'test2_answers' },
            { header: '–¢–µ—Å—Ç 3', key: 'test3_answers' },
            { header: '–¢–µ—Å—Ç 4', key: 'test4_answers' }
        ];

        // –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
        const users = await getAllUsers();

        // –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º –∏ –¥–æ–±–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ
        users.forEach(user => {
            const formattedUser = {
                chat_id: user.chat_id,
                username: user.username,
                full_name: user.full_name,
                age: user.age,
                gender: user.gender === 'male' ? '–ú—É–∂—Å–∫–æ–π' : '–ñ–µ–Ω—Å–∫–∏–π',
                taking_meds: user.taking_meds === 'yes' ? '–î–∞' : '–ù–µ—Ç',
                meds_details: user.meds_details || '–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö',
                pregnant: user.pregnant === 'yes' ? '–î–∞' : user.pregnant === 'no' ? '–ù–µ—Ç' : '–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö',
                test1_answers: formatTestAnswersForExport('test1', user.test1_answers),
                test2_answers: formatTestAnswersForExport('test2', user.test2_answers),
                test3_answers: formatTestAnswersForExport('test3', user.test3_answers),
                test4_answers: formatTestAnswersForExport('test4', user.test4_answers)
            };
            worksheet.addRow(formattedUser);
        });

        // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ñ–∞–π–ª
        const fileName = `user_database_${Date.now()}.xlsx`;
        await workbook.xlsx.writeFile(fileName);

        // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ñ–∞–π–ª
        await bot.sendDocument(chatId, fileName);

        // –£–¥–∞–ª—è–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª
        fs.unlinkSync(fileName);

        await bot.sendMessage(chatId, '–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —É—Å–ø–µ—à–Ω–æ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∞.');

    } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ —ç–∫—Å–ø–æ—Ä—Ç–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:', error);
        await bot.sendMessage(chatId, '–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ —ç–∫—Å–ø–æ—Ä—Ç–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.');
    }
}

// 20. –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
function isValidFullName(name) {
    return /^[–ê-–Ø–Å][–∞-—è—ë]+\s[–ê-–Ø–Å][–∞-—è—ë]+\s[–ê-–Ø–Å][–∞-—è—ë]+$/.test(name);
}

function isValidAge(age) {
    return !isNaN(age) && age >= 1 && age <= 120;
}

async function getUserProfile(chatId) {
    return new Promise((resolve, reject) => {
        db.get('SELECT * FROM responses WHERE chat_id = ?', [chatId], (err, row) => {
            if (err) reject(err);
            resolve(row || {});
        });
    });
}

async function getUserStage(chatId) {
    return new Promise((resolve, reject) => {
        db.get('SELECT stage FROM responses WHERE chat_id = ?', [chatId], (err, row) => {
            if (err) reject(err);
            resolve(row ? row.stage : null);
        });
    });
}

async function getUserGender(chatId) {
    return new Promise((resolve, reject) => {
        db.get('SELECT gender FROM responses WHERE chat_id = ?', [chatId], (err, row) => {
            if (err) reject(err);
            resolve(row ? row.gender : null);
        });
    });
}

async function getLastMessageId(chatId) {
    return new Promise((resolve, reject) => {
        db.get('SELECT message_id FROM responses WHERE chat_id = ?', [chatId], (err, row) => {
            if (err) reject(err);
            resolve(row ? row.message_id : null);
        });
    });
}

async function getAllUsers() {
    return new Promise((resolve, reject) => {
        db.all('SELECT * FROM responses', (err, rows) => {
            if (err) reject(err);
            else resolve(rows || []);
        });
    });
}

function formatTestAnswersForExport(testNumber, answersJson) {
    try {
        const answers = JSON.parse(answersJson || '[]');
        const test = tests[testNumber];
        if (!test || !answers.length) return '–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö';

        return answers.map((answer, index) => {
            const question = test.questions[index];
            const formattedAnswer = test.type === 'binary' ? 
                (answer === 'yes' ? '–î–∞' : '–ù–µ—Ç') :
                test.options.find(opt => opt.value === answer)?.text || '–ù–µ—Ç –æ—Ç–≤–µ—Ç–∞';
            return `${index + 1}) ${question}: ${formattedAnswer}`;
        }).join('\n');
    } catch (error) {
        console.error('–û—à–∏–±–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–æ–≤:', error);
        return '–û—à–∏–±–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è';
    }
}

// 21. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
process.on('uncaughtException', (error) => {
    console.error('–ù–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–∞—è –æ—à–∏–±–∫–∞:', error);
});

process.on('unhandledRejection', (error) => {
    console.error('–ù–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –ø—Ä–æ–º–∏—Å–∞:', error);
});
